/*! For license information please see zarr-gl.js.LICENSE.txt */
var r={500:function(r,t,n){r=n.nmd(r),function(t){function e(r,t){t|=0;for(var n=Math.max(r.length-t,0),e=Array(n),a=0;a<n;a++)e[a]=r[t+a];return e}var a=function(r){var t=e(arguments,1);return function(){var n=e(arguments);return r.apply(null,t.concat(n))}},i=function(r){return function(){var t=e(arguments),n=t.pop();r.call(this,t,n)}};function o(r){var t=typeof r;return null!=r&&("object"==t||"function"==t)}var s="function"==typeof setImmediate&&setImmediate,u="object"==typeof process&&"function"==typeof process.nextTick;function c(r){setTimeout(r,0)}function f(r){return function(t){var n=e(arguments,1);r((function(){t.apply(null,n)}))}}var l=f(s?setImmediate:u?process.nextTick:c);function h(r){return i((function(t,n){var e;try{e=r.apply(this,t)}catch(r){return n(r)}o(e)&&"function"==typeof e.then?e.then((function(r){p(n,null,r)}),(function(r){p(n,r.message?r:new Error(r))})):n(null,e)}))}function p(r,t,n){try{r(t,n)}catch(r){l(d,r)}}function d(r){throw r}var v="function"==typeof Symbol;function y(r){return v&&"AsyncFunction"===r[Symbol.toStringTag]}function g(r){return y(r)?h(r):r}function m(r){return function(t){var n=e(arguments,1),a=i((function(n,e){var a=this;return r(t,(function(r,t){g(r).apply(a,n.concat(t))}),e)}));return n.length?a.apply(this,n):a}}var b="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,_="object"==typeof self&&self&&self.Object===Object&&self,w=b||_||Function("return this")(),A=w.Symbol,x=Object.prototype,E=x.hasOwnProperty,T=x.toString,j=A?A.toStringTag:void 0;var k=Object.prototype.toString;var I=A?A.toStringTag:void 0;function S(r){return null==r?void 0===r?"[object Undefined]":"[object Null]":I&&I in Object(r)?function(r){var t=E.call(r,j),n=r[j];try{r[j]=void 0;var e=!0}catch(r){}var a=T.call(r);return e&&(t?r[j]=n:delete r[j]),a}(r):function(r){return k.call(r)}(r)}function R(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=9007199254740991}function L(r){return null!=r&&R(r.length)&&!function(r){if(!o(r))return!1;var t=S(r);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}(r)}var B={};function V(){}function U(r){return function(){if(null!==r){var t=r;r=null,t.apply(this,arguments)}}}var F="function"==typeof Symbol&&Symbol.iterator;function M(r){return null!=r&&"object"==typeof r}function O(r){return M(r)&&"[object Arguments]"==S(r)}var N=Object.prototype,D=N.hasOwnProperty,z=N.propertyIsEnumerable,P=O(function(){return arguments}())?O:function(r){return M(r)&&D.call(r,"callee")&&!z.call(r,"callee")},C=Array.isArray;var q="object"==typeof t&&t&&!t.nodeType&&t,$=q&&r&&!r.nodeType&&r,G=$&&$.exports===q?w.Buffer:void 0,X=(G?G.isBuffer:void 0)||function(){return!1},W=/^(?:0|[1-9]\d*)$/;function H(r,t){var n=typeof r;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&W.test(r))&&r>-1&&r%1==0&&r<t}var Z={};Z["[object Float32Array]"]=Z["[object Float64Array]"]=Z["[object Int8Array]"]=Z["[object Int16Array]"]=Z["[object Int32Array]"]=Z["[object Uint8Array]"]=Z["[object Uint8ClampedArray]"]=Z["[object Uint16Array]"]=Z["[object Uint32Array]"]=!0,Z["[object Arguments]"]=Z["[object Array]"]=Z["[object ArrayBuffer]"]=Z["[object Boolean]"]=Z["[object DataView]"]=Z["[object Date]"]=Z["[object Error]"]=Z["[object Function]"]=Z["[object Map]"]=Z["[object Number]"]=Z["[object Object]"]=Z["[object RegExp]"]=Z["[object Set]"]=Z["[object String]"]=Z["[object WeakMap]"]=!1;var Y,J="object"==typeof t&&t&&!t.nodeType&&t,Q=J&&r&&!r.nodeType&&r,K=Q&&Q.exports===J&&b.process,rr=function(){try{return Q&&Q.require&&Q.require("util").types||K&&K.binding&&K.binding("util")}catch(r){}}(),tr=rr&&rr.isTypedArray,nr=tr?(Y=tr,function(r){return Y(r)}):function(r){return M(r)&&R(r.length)&&!!Z[S(r)]},er=Object.prototype.hasOwnProperty;function ar(r,t){var n=C(r),e=!n&&P(r),a=!n&&!e&&X(r),i=!n&&!e&&!a&&nr(r),o=n||e||a||i,s=o?function(r,t){for(var n=-1,e=Array(r);++n<r;)e[n]=t(n);return e}(r.length,String):[],u=s.length;for(var c in r)!t&&!er.call(r,c)||o&&("length"==c||a&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||H(c,u))||s.push(c);return s}var ir=Object.prototype;var or=function(r,t){return function(n){return r(t(n))}}(Object.keys,Object),sr=Object.prototype.hasOwnProperty;function ur(r){if(n=(t=r)&&t.constructor,t!==("function"==typeof n&&n.prototype||ir))return or(r);var t,n,e=[];for(var a in Object(r))sr.call(r,a)&&"constructor"!=a&&e.push(a);return e}function cr(r){return L(r)?ar(r):ur(r)}function fr(r){if(L(r))return function(r){var t=-1,n=r.length;return function(){return++t<n?{value:r[t],key:t}:null}}(r);var t,n,e,a,i=function(r){return F&&r[F]&&r[F]()}(r);return i?function(r){var t=-1;return function(){var n=r.next();return n.done?null:(t++,{value:n.value,key:t})}}(i):(n=cr(t=r),e=-1,a=n.length,function r(){var i=n[++e];return"__proto__"===i?r():e<a?{value:t[i],key:i}:null})}function lr(r){return function(){if(null===r)throw new Error("Callback was already called.");var t=r;r=null,t.apply(this,arguments)}}function hr(r){return function(t,n,e){if(e=U(e||V),r<=0||!t)return e(null);var a=fr(t),i=!1,o=0,s=!1;function u(r,t){if(o-=1,r)i=!0,e(r);else{if(t===B||i&&o<=0)return i=!0,e(null);s||c()}}function c(){for(s=!0;o<r&&!i;){var t=a();if(null===t)return i=!0,void(o<=0&&e(null));o+=1,n(t.value,t.key,lr(u))}s=!1}c()}}function pr(r,t,n,e){hr(t)(r,g(n),e)}function dr(r,t){return function(n,e,a){return r(n,t,e,a)}}function vr(r,t,n){n=U(n||V);var e=0,a=0,i=r.length;function o(r,t){r?n(r):++a!==i&&t!==B||n(null)}for(0===i&&n(null);e<i;e++)t(r[e],e,lr(o))}var yr=dr(pr,1/0),gr=function(r,t,n){(L(r)?vr:yr)(r,g(t),n)};function mr(r){return function(t,n,e){return r(gr,t,g(n),e)}}function br(r,t,n,e){e=e||V,t=t||[];var a=[],i=0,o=g(n);r(t,(function(r,t,n){var e=i++;o(r,(function(r,t){a[e]=t,n(r)}))}),(function(r){e(r,a)}))}var _r=mr(br),wr=m(_r);function Ar(r){return function(t,n,e,a){return r(hr(n),t,g(e),a)}}var xr=Ar(br),Er=dr(xr,1),Tr=m(Er);function jr(r,t){for(var n=-1,e=null==r?0:r.length;++n<e&&!1!==t(r[n],n,r););return r}var kr,Ir=function(r,t,n){for(var e=-1,a=Object(r),i=n(r),o=i.length;o--;){var s=i[kr?o:++e];if(!1===t(a[s],s,a))break}return r};function Sr(r,t){return r&&Ir(r,t,cr)}function Rr(r){return r!=r}function Lr(r,t,n){return t==t?function(r,t,n){for(var e=n-1,a=r.length;++e<a;)if(r[e]===t)return e;return-1}(r,t,n):function(r,t,n,e){for(var a=r.length,i=n+(e?1:-1);e?i--:++i<a;)if(t(r[i],i,r))return i;return-1}(r,Rr,n)}var Br=function(r,t,n){"function"==typeof t&&(n=t,t=null),n=U(n||V);var a=cr(r).length;if(!a)return n(null);t||(t=a);var i={},o=0,s=!1,u=Object.create(null),c=[],f=[],l={};function h(r,t){c.push((function(){!function(r,t){if(!s){var a=lr((function(t,a){if(o--,arguments.length>2&&(a=e(arguments,1)),t){var c={};Sr(i,(function(r,t){c[t]=r})),c[r]=a,s=!0,u=Object.create(null),n(t,c)}else i[r]=a,jr(u[r]||[],(function(r){r()})),p()}));o++;var c=g(t[t.length-1]);t.length>1?c(i,a):c(a)}}(r,t)}))}function p(){if(0===c.length&&0===o)return n(null,i);for(;c.length&&o<t;)c.shift()()}function d(t){var n=[];return Sr(r,(function(r,e){C(r)&&Lr(r,t,0)>=0&&n.push(e)})),n}Sr(r,(function(t,n){if(!C(t))return h(n,[t]),void f.push(n);var e=t.slice(0,t.length-1),a=e.length;if(0===a)return h(n,t),void f.push(n);l[n]=a,jr(e,(function(i){if(!r[i])throw new Error("async.auto task `"+n+"` has a non-existent dependency `"+i+"` in "+e.join(", "));var o,s,c;s=function(){0==--a&&h(n,t)},(c=u[o=i])||(c=u[o]=[]),c.push(s)}))})),function(){for(var r=0;f.length;)r++,jr(d(f.pop()),(function(r){0==--l[r]&&f.push(r)}));if(r!==a)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),p()};function Vr(r,t){for(var n=-1,e=null==r?0:r.length,a=Array(e);++n<e;)a[n]=t(r[n],n,r);return a}var Ur=A?A.prototype:void 0,Fr=Ur?Ur.toString:void 0;function Mr(r){if("string"==typeof r)return r;if(C(r))return Vr(r,Mr)+"";if(function(r){return"symbol"==typeof r||M(r)&&"[object Symbol]"==S(r)}(r))return Fr?Fr.call(r):"";var t=r+"";return"0"==t&&1/r==-1/0?"-0":t}function Or(r,t,n){var e=r.length;return n=void 0===n?e:n,!t&&n>=e?r:function(r,t,n){var e=-1,a=r.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++e<a;)i[e]=r[e+t];return i}(r,t,n)}var Nr=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Dr="\\ud800-\\udfff",zr="["+Dr+"]",Pr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Cr="\\ud83c[\\udffb-\\udfff]",qr="[^"+Dr+"]",$r="(?:\\ud83c[\\udde6-\\uddff]){2}",Gr="[\\ud800-\\udbff][\\udc00-\\udfff]",Xr="(?:"+Pr+"|"+Cr+")?",Wr="[\\ufe0e\\ufe0f]?",Hr=Wr+Xr+("(?:\\u200d(?:"+[qr,$r,Gr].join("|")+")"+Wr+Xr+")*"),Zr="(?:"+[qr+Pr+"?",Pr,$r,Gr,zr].join("|")+")",Yr=RegExp(Cr+"(?="+Cr+")|"+Zr+Hr,"g");function Jr(r){return function(r){return Nr.test(r)}(r)?function(r){return r.match(Yr)||[]}(r):function(r){return r.split("")}(r)}var Qr=/^\s+|\s+$/g;function Kr(r,t,n){if((r=null==(e=r)?"":Mr(e))&&(n||void 0===t))return r.replace(Qr,"");var e;if(!r||!(t=Mr(t)))return r;var a=Jr(r),i=Jr(t);return Or(a,function(r,t){for(var n=-1,e=r.length;++n<e&&Lr(t,r[n],0)>-1;);return n}(a,i),function(r,t){for(var n=r.length;n--&&Lr(t,r[n],0)>-1;);return n}(a,i)+1).join("")}var rt=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,tt=/,/,nt=/(=.+)?(\s*)$/,et=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function at(r,t){var n={};Sr(r,(function(r,t){var e,a=y(r),i=!a&&1===r.length||a&&0===r.length;if(C(r))e=r.slice(0,-1),r=r[r.length-1],n[t]=e.concat(e.length>0?o:r);else if(i)n[t]=r;else{if(e=function(r){return(r=(r=(r=r.toString().replace(et,"")).match(rt)[2].replace(" ",""))?r.split(tt):[]).map((function(r){return Kr(r.replace(nt,""))}))}(r),0===r.length&&!a&&0===e.length)throw new Error("autoInject task functions require explicit parameters.");a||e.pop(),n[t]=e.concat(o)}function o(t,n){var a=Vr(e,(function(r){return t[r]}));a.push(n),g(r).apply(null,a)}})),Br(n,t)}function it(){this.head=this.tail=null,this.length=0}function ot(r,t){r.length=1,r.head=r.tail=t}function st(r,t,n){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var e=g(r),a=0,i=[],o=!1;function s(r,t,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(f.started=!0,C(r)||(r=[r]),0===r.length&&f.idle())return l((function(){f.drain()}));for(var e=0,a=r.length;e<a;e++){var i={data:r[e],callback:n||V};t?f._tasks.unshift(i):f._tasks.push(i)}o||(o=!0,l((function(){o=!1,f.process()})))}function u(r){return function(t){a-=1;for(var n=0,e=r.length;n<e;n++){var o=r[n],s=Lr(i,o,0);0===s?i.shift():s>0&&i.splice(s,1),o.callback.apply(o,arguments),null!=t&&f.error(t,o.data)}a<=f.concurrency-f.buffer&&f.unsaturated(),f.idle()&&f.drain(),f.process()}}var c=!1,f={_tasks:new it,concurrency:t,payload:n,saturated:V,unsaturated:V,buffer:t/4,empty:V,drain:V,error:V,started:!1,paused:!1,push:function(r,t){s(r,!1,t)},kill:function(){f.drain=V,f._tasks.empty()},unshift:function(r,t){s(r,!0,t)},remove:function(r){f._tasks.remove(r)},process:function(){if(!c){for(c=!0;!f.paused&&a<f.concurrency&&f._tasks.length;){var r=[],t=[],n=f._tasks.length;f.payload&&(n=Math.min(n,f.payload));for(var o=0;o<n;o++){var s=f._tasks.shift();r.push(s),i.push(s),t.push(s.data)}a+=1,0===f._tasks.length&&f.empty(),a===f.concurrency&&f.saturated();var l=lr(u(r));e(t,l)}c=!1}},length:function(){return f._tasks.length},running:function(){return a},workersList:function(){return i},idle:function(){return f._tasks.length+a===0},pause:function(){f.paused=!0},resume:function(){!1!==f.paused&&(f.paused=!1,l(f.process))}};return f}function ut(r,t){return st(r,1,t)}it.prototype.removeLink=function(r){return r.prev?r.prev.next=r.next:this.head=r.next,r.next?r.next.prev=r.prev:this.tail=r.prev,r.prev=r.next=null,this.length-=1,r},it.prototype.empty=function(){for(;this.head;)this.shift();return this},it.prototype.insertAfter=function(r,t){t.prev=r,t.next=r.next,r.next?r.next.prev=t:this.tail=t,r.next=t,this.length+=1},it.prototype.insertBefore=function(r,t){t.prev=r.prev,t.next=r,r.prev?r.prev.next=t:this.head=t,r.prev=t,this.length+=1},it.prototype.unshift=function(r){this.head?this.insertBefore(this.head,r):ot(this,r)},it.prototype.push=function(r){this.tail?this.insertAfter(this.tail,r):ot(this,r)},it.prototype.shift=function(){return this.head&&this.removeLink(this.head)},it.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},it.prototype.toArray=function(){for(var r=Array(this.length),t=this.head,n=0;n<this.length;n++)r[n]=t.data,t=t.next;return r},it.prototype.remove=function(r){for(var t=this.head;t;){var n=t.next;r(t)&&this.removeLink(t),t=n}return this};var ct=dr(pr,1);function ft(r,t,n,e){e=U(e||V);var a=g(n);ct(r,(function(r,n,e){a(t,r,(function(r,n){t=n,e(r)}))}),(function(r){e(r,t)}))}function lt(){var r=Vr(arguments,g);return function(){var t=e(arguments),n=this,a=t[t.length-1];"function"==typeof a?t.pop():a=V,ft(r,t,(function(r,t,a){t.apply(n,r.concat((function(r){var t=e(arguments,1);a(r,t)})))}),(function(r,t){a.apply(n,[r].concat(t))}))}}var ht=function(){return lt.apply(null,e(arguments).reverse())},pt=Array.prototype.concat,dt=function(r,t,n,a){a=a||V;var i=g(n);xr(r,t,(function(r,t){i(r,(function(r){return r?t(r):t(null,e(arguments,1))}))}),(function(r,t){for(var n=[],e=0;e<t.length;e++)t[e]&&(n=pt.apply(n,t[e]));return a(r,n)}))},vt=dr(dt,1/0),yt=dr(dt,1),gt=function(){var r=e(arguments),t=[null].concat(r);return function(){return arguments[arguments.length-1].apply(this,t)}};function mt(r){return r}function bt(r,t){return function(n,e,a,i){i=i||V;var o,s=!1;n(e,(function(n,e,i){a(n,(function(e,a){e?i(e):r(a)&&!o?(s=!0,o=t(!0,n),i(null,B)):i()}))}),(function(r){r?i(r):i(null,s?o:t(!1))}))}}function _t(r,t){return t}var wt=mr(bt(mt,_t)),At=Ar(bt(mt,_t)),xt=dr(At,1);function Et(r){return function(t){var n=e(arguments,1);n.push((function(t){var n=e(arguments,1);"object"==typeof console&&(t?console.error&&console.error(t):console[r]&&jr(n,(function(t){console[r](t)})))})),g(t).apply(null,n)}}var Tt=Et("dir");function jt(r,t,n){n=lr(n||V);var a=g(r),i=g(t);function o(r){if(r)return n(r);var t=e(arguments,1);t.push(s),i.apply(this,t)}function s(r,t){return r?n(r):t?void a(o):n(null)}s(null,!0)}function kt(r,t,n){n=lr(n||V);var a=g(r),i=function(r){if(r)return n(r);var o=e(arguments,1);if(t.apply(this,o))return a(i);n.apply(null,[null].concat(o))};a(i)}function It(r,t,n){kt(r,(function(){return!t.apply(this,arguments)}),n)}function St(r,t,n){n=lr(n||V);var e=g(t),a=g(r);function i(r){if(r)return n(r);a(o)}function o(r,t){return r?n(r):t?void e(i):n(null)}a(o)}function Rt(r){return function(t,n,e){return r(t,e)}}function Lt(r,t,n){gr(r,Rt(g(t)),n)}function Bt(r,t,n,e){hr(t)(r,Rt(g(n)),e)}var Vt=dr(Bt,1);function Ut(r){return y(r)?r:i((function(t,n){var e=!0;t.push((function(){var r=arguments;e?l((function(){n.apply(null,r)})):n.apply(null,r)})),r.apply(this,t),e=!1}))}function Ft(r){return!r}var Mt=mr(bt(Ft,Ft)),Ot=Ar(bt(Ft,Ft)),Nt=dr(Ot,1);function Dt(r){return function(t){return null==t?void 0:t[r]}}function zt(r,t,n,e){var a=new Array(t.length);r(t,(function(r,t,e){n(r,(function(r,n){a[t]=!!n,e(r)}))}),(function(r){if(r)return e(r);for(var n=[],i=0;i<t.length;i++)a[i]&&n.push(t[i]);e(null,n)}))}function Pt(r,t,n,e){var a=[];r(t,(function(r,t,e){n(r,(function(n,i){n?e(n):(i&&a.push({index:t,value:r}),e())}))}),(function(r){r?e(r):e(null,Vr(a.sort((function(r,t){return r.index-t.index})),Dt("value")))}))}function Ct(r,t,n,e){(L(t)?zt:Pt)(r,t,g(n),e||V)}var qt=mr(Ct),$t=Ar(Ct),Gt=dr($t,1);function Xt(r,t){var n=lr(t||V),e=g(Ut(r));!function r(t){if(t)return n(t);e(r)}()}var Wt=function(r,t,n,e){e=e||V;var a=g(n);xr(r,t,(function(r,t){a(r,(function(n,e){return n?t(n):t(null,{key:e,val:r})}))}),(function(r,t){for(var n={},a=Object.prototype.hasOwnProperty,i=0;i<t.length;i++)if(t[i]){var o=t[i].key,s=t[i].val;a.call(n,o)?n[o].push(s):n[o]=[s]}return e(r,n)}))},Ht=dr(Wt,1/0),Zt=dr(Wt,1),Yt=Et("log");function Jt(r,t,n,e){e=U(e||V);var a={},i=g(n);pr(r,t,(function(r,t,n){i(r,t,(function(r,e){if(r)return n(r);a[t]=e,n()}))}),(function(r){e(r,a)}))}var Qt=dr(Jt,1/0),Kt=dr(Jt,1);function rn(r,t){return t in r}function tn(r,t){var n=Object.create(null),a=Object.create(null);t=t||mt;var o=g(r),s=i((function(r,i){var s=t.apply(null,r);rn(n,s)?l((function(){i.apply(null,n[s])})):rn(a,s)?a[s].push(i):(a[s]=[i],o.apply(null,r.concat((function(){var r=e(arguments);n[s]=r;var t=a[s];delete a[s];for(var i=0,o=t.length;i<o;i++)t[i].apply(null,r)}))))}));return s.memo=n,s.unmemoized=r,s}var nn=f(u?process.nextTick:s?setImmediate:c);function en(r,t,n){n=n||V;var a=L(t)?[]:{};r(t,(function(r,t,n){g(r)((function(r,i){arguments.length>2&&(i=e(arguments,1)),a[t]=i,n(r)}))}),(function(r){n(r,a)}))}function an(r,t){en(gr,r,t)}function on(r,t,n){en(hr(t),r,n)}var sn=function(r,t){var n=g(r);return st((function(r,t){n(r[0],t)}),t,1)},un=function(r,t){var n=sn(r,t);return n.push=function(r,t,e){if(null==e&&(e=V),"function"!=typeof e)throw new Error("task callback must be a function");if(n.started=!0,C(r)||(r=[r]),0===r.length)return l((function(){n.drain()}));t=t||0;for(var a=n._tasks.head;a&&t>=a.priority;)a=a.next;for(var i=0,o=r.length;i<o;i++){var s={data:r[i],priority:t,callback:e};a?n._tasks.insertBefore(a,s):n._tasks.push(s)}l(n.process)},delete n.unshift,n};function cn(r,t){if(t=U(t||V),!C(r))return t(new TypeError("First argument to race must be an array of functions"));if(!r.length)return t();for(var n=0,e=r.length;n<e;n++)g(r[n])(t)}function fn(r,t,n,a){ft(e(r).reverse(),t,n,a)}function ln(r){var t=g(r);return i((function(r,n){return r.push((function(r,t){var a;r?n(null,{error:r}):(a=arguments.length<=2?t:e(arguments,1),n(null,{value:a}))})),t.apply(this,r)}))}function hn(r){var t;return C(r)?t=Vr(r,ln):(t={},Sr(r,(function(r,n){t[n]=ln.call(this,r)}))),t}function pn(r,t,n,e){Ct(r,t,(function(r,t){n(r,(function(r,n){t(r,!n)}))}),e)}var dn=mr(pn),vn=Ar(pn),yn=dr(vn,1);function gn(r){return function(){return r}}function mn(r,t,n){var e={times:5,intervalFunc:gn(0)};if(arguments.length<3&&"function"==typeof r?(n=t||V,t=r):(function(r,t){if("object"==typeof t)r.times=+t.times||5,r.intervalFunc="function"==typeof t.interval?t.interval:gn(+t.interval||0),r.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");r.times=+t||5}}(e,r),n=n||V),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var a=g(t),i=1;!function r(){a((function(t){t&&i++<e.times&&("function"!=typeof e.errorFilter||e.errorFilter(t))?setTimeout(r,e.intervalFunc(i)):n.apply(null,arguments)}))}()}var bn=function(r,t){t||(t=r,r=null);var n=g(t);return i((function(t,e){function a(r){n.apply(null,t.concat(r))}r?mn(r,a,e):mn(a,e)}))};function _n(r,t){en(ct,r,t)}var wn=mr(bt(Boolean,mt)),An=Ar(bt(Boolean,mt)),xn=dr(An,1);function En(r,t,n){var e=g(t);function a(r,t){var n=r.criteria,e=t.criteria;return n<e?-1:n>e?1:0}_r(r,(function(r,t){e(r,(function(n,e){if(n)return t(n);t(null,{value:r,criteria:e})}))}),(function(r,t){if(r)return n(r);n(null,Vr(t.sort(a),Dt("value")))}))}function Tn(r,t,n){var e=g(r);return i((function(a,i){var o,s=!1;a.push((function(){s||(i.apply(null,arguments),clearTimeout(o))})),o=setTimeout((function(){var t=r.name||"anonymous",e=new Error('Callback function "'+t+'" timed out.');e.code="ETIMEDOUT",n&&(e.info=n),s=!0,i(e)}),t),e.apply(null,a)}))}var jn=Math.ceil,kn=Math.max;function In(r,t,n,e){var a=g(n);xr(function(r,t,n,e){for(var a=-1,i=kn(jn((t-r)/(n||1)),0),o=Array(i);i--;)o[e?i:++a]=r,r+=n;return o}(0,r,1),t,a,e)}var Sn=dr(In,1/0),Rn=dr(In,1);function Ln(r,t,n,e){arguments.length<=3&&(e=n,n=t,t=C(r)?[]:{}),e=U(e||V);var a=g(n);gr(r,(function(r,n,e){a(t,r,n,e)}),(function(r){e(r,t)}))}function Bn(r,t){var n,a=null;t=t||V,Vt(r,(function(r,t){g(r)((function(r,i){n=arguments.length>2?e(arguments,1):i,a=r,t(!r)}))}),(function(){t(a,n)}))}function Vn(r){return function(){return(r.unmemoized||r).apply(null,arguments)}}function Un(r,t,n){n=lr(n||V);var a=g(t);if(!r())return n(null);var i=function(t){if(t)return n(t);if(r())return a(i);var o=e(arguments,1);n.apply(null,[null].concat(o))};a(i)}function Fn(r,t,n){Un((function(){return!r.apply(this,arguments)}),t,n)}var Mn=function(r,t){if(t=U(t||V),!C(r))return t(new Error("First argument to waterfall must be an array of functions"));if(!r.length)return t();var n=0;function a(t){var e=g(r[n++]);t.push(lr(i)),e.apply(null,t)}function i(i){if(i||n===r.length)return t.apply(null,arguments);a(e(arguments,1))}a([])},On={apply:a,applyEach:wr,applyEachSeries:Tr,asyncify:h,auto:Br,autoInject:at,cargo:ut,compose:ht,concat:vt,concatLimit:dt,concatSeries:yt,constant:gt,detect:wt,detectLimit:At,detectSeries:xt,dir:Tt,doDuring:jt,doUntil:It,doWhilst:kt,during:St,each:Lt,eachLimit:Bt,eachOf:gr,eachOfLimit:pr,eachOfSeries:ct,eachSeries:Vt,ensureAsync:Ut,every:Mt,everyLimit:Ot,everySeries:Nt,filter:qt,filterLimit:$t,filterSeries:Gt,forever:Xt,groupBy:Ht,groupByLimit:Wt,groupBySeries:Zt,log:Yt,map:_r,mapLimit:xr,mapSeries:Er,mapValues:Qt,mapValuesLimit:Jt,mapValuesSeries:Kt,memoize:tn,nextTick:nn,parallel:an,parallelLimit:on,priorityQueue:un,queue:sn,race:cn,reduce:ft,reduceRight:fn,reflect:ln,reflectAll:hn,reject:dn,rejectLimit:vn,rejectSeries:yn,retry:mn,retryable:bn,seq:lt,series:_n,setImmediate:l,some:wn,someLimit:An,someSeries:xn,sortBy:En,timeout:Tn,times:Sn,timesLimit:In,timesSeries:Rn,transform:Ln,tryEach:Bn,unmemoize:Vn,until:Fn,waterfall:Mn,whilst:Un,all:Mt,allLimit:Ot,allSeries:Nt,any:wn,anyLimit:An,anySeries:xn,find:wt,findLimit:At,findSeries:xt,forEach:Lt,forEachSeries:Vt,forEachLimit:Bt,forEachOf:gr,forEachOfSeries:ct,forEachOfLimit:pr,inject:ft,foldl:ft,foldr:fn,select:qt,selectLimit:$t,selectSeries:Gt,wrapSync:h};t.default=On,t.apply=a,t.applyEach=wr,t.applyEachSeries=Tr,t.asyncify=h,t.auto=Br,t.autoInject=at,t.cargo=ut,t.compose=ht,t.concat=vt,t.concatLimit=dt,t.concatSeries=yt,t.constant=gt,t.detect=wt,t.detectLimit=At,t.detectSeries=xt,t.dir=Tt,t.doDuring=jt,t.doUntil=It,t.doWhilst=kt,t.during=St,t.each=Lt,t.eachLimit=Bt,t.eachOf=gr,t.eachOfLimit=pr,t.eachOfSeries=ct,t.eachSeries=Vt,t.ensureAsync=Ut,t.every=Mt,t.everyLimit=Ot,t.everySeries=Nt,t.filter=qt,t.filterLimit=$t,t.filterSeries=Gt,t.forever=Xt,t.groupBy=Ht,t.groupByLimit=Wt,t.groupBySeries=Zt,t.log=Yt,t.map=_r,t.mapLimit=xr,t.mapSeries=Er,t.mapValues=Qt,t.mapValuesLimit=Jt,t.mapValuesSeries=Kt,t.memoize=tn,t.nextTick=nn,t.parallel=an,t.parallelLimit=on,t.priorityQueue=un,t.queue=sn,t.race=cn,t.reduce=ft,t.reduceRight=fn,t.reflect=ln,t.reflectAll=hn,t.reject=dn,t.rejectLimit=vn,t.rejectSeries=yn,t.retry=mn,t.retryable=bn,t.seq=lt,t.series=_n,t.setImmediate=l,t.some=wn,t.someLimit=An,t.someSeries=xn,t.sortBy=En,t.timeout=Tn,t.times=Sn,t.timesLimit=In,t.timesSeries=Rn,t.transform=Ln,t.tryEach=Bn,t.unmemoize=Vn,t.until=Fn,t.waterfall=Mn,t.whilst=Un,t.all=Mt,t.allLimit=Ot,t.allSeries=Nt,t.any=wn,t.anyLimit=An,t.anySeries=xn,t.find=wt,t.findLimit=At,t.findSeries=xt,t.forEach=Lt,t.forEachSeries=Vt,t.forEachLimit=Bt,t.forEachOf=gr,t.forEachOfSeries=ct,t.forEachOfLimit=pr,t.inject=ft,t.foldl=ft,t.foldr=fn,t.select=qt,t.selectLimit=$t,t.selectSeries=Gt,t.wrapSync=h,Object.defineProperty(t,"__esModule",{value:!0})}(t)},973:(r,t)=>{function n(r){var t=32;return(r&=-r)&&t--,65535&r&&(t-=16),16711935&r&&(t-=8),252645135&r&&(t-=4),858993459&r&&(t-=2),1431655765&r&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(r){return(r>0)-(r<0)},t.abs=function(r){var t=r>>31;return(r^t)-t},t.min=function(r,t){return t^(r^t)&-(r<t)},t.max=function(r,t){return r^(r^t)&-(r<t)},t.isPow2=function(r){return!(r&r-1||!r)},t.log2=function(r){var t,n;return t=(r>65535)<<4,t|=n=((r>>>=t)>255)<<3,t|=n=((r>>>=n)>15)<<2,(t|=n=((r>>>=n)>3)<<1)|(r>>>=n)>>1},t.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},t.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},t.countTrailingZeros=n,t.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,1+(r|=r>>>16)},t.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},t.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var e=new Array(256);!function(r){for(var t=0;t<256;++t){var n=t,e=t,a=7;for(n>>>=1;n;n>>>=1)e<<=1,e|=1&n,--a;r[t]=e<<a&255}}(e),t.reverse=function(r){return e[255&r]<<24|e[r>>>8&255]<<16|e[r>>>16&255]<<8|e[r>>>24&255]},t.interleave2=function(r,t){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(r,t){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>t&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},t.interleave3=function(r,t,n){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},t.deinterleave3=function(r,t){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>t&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},t.nextCombination=function(r){var t=r|r-1;return t+1|(~t&-~t)-1>>>n(r)+1}},92:r=>{r.exports=function(r){if(!Array.isArray(r))throw new TypeError;var t=r.length-1,n=[];return r.length?function e(a,i){for(var o=r[i],s=i===t,u=0;u<o.length;++u){var c=a.slice();c.push(o[u]),s?n.push(c):e(c,i+1)}}([],0):n.push([]),n}},543:(r,t,n)=>{var e=n(644);function a(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}r.exports=function(r){var t=new a;t.pre=r.pre,t.body=r.body,t.post=r.post;var n=r.args.slice(0);t.argTypes=n;for(var i=0;i<n.length;++i){var o=n[i];if("array"===o||"object"==typeof o&&o.blockIndices){if(t.argTypes[i]="array",t.arrayArgs.push(i),t.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if("index"===o){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof o||!o.offset)throw new Error("cwise: Unknown argument type "+n[i]);t.argTypes[i]="offset",t.offsetArgs.push({array:o.array,offset:o.offset}),t.offsetArgIndex.push(i)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!r.printCode||!!r.debug,t.funcName=r.funcName||"cwise",t.blockSize=r.blockSize||64,e(t)}},121:(r,t,n)=>{var e=n(887);function a(r,t,n){var e,a,i=r.length,o=t.arrayArgs.length,s=t.indexArgs.length>0,u=[],c=[],f=0,l=0;for(e=0;e<i;++e)c.push(["i",e,"=0"].join(""));for(a=0;a<o;++a)for(e=0;e<i;++e)l=f,f=r[e],0===e?c.push(["d",a,"s",e,"=t",a,"p",f].join("")):c.push(["d",a,"s",e,"=(t",a,"p",f,"-s",l,"*t",a,"p",l,")"].join(""));for(c.length>0&&u.push("var "+c.join(",")),e=i-1;e>=0;--e)f=r[e],u.push(["for(i",e,"=0;i",e,"<s",f,";++i",e,"){"].join(""));for(u.push(n),e=0;e<i;++e){for(l=f,f=r[e],a=0;a<o;++a)u.push(["p",a,"+=d",a,"s",e].join(""));s&&(e>0&&u.push(["index[",l,"]-=s",l].join("")),u.push(["++index[",f,"]"].join(""))),u.push("}")}return u.join("\n")}function i(r,t,n){for(var e=r.body,a=[],i=[],o=0;o<r.args.length;++o){var s=r.args[o];if(!(s.count<=0)){var u=new RegExp(s.name,"g"),c="",f=t.arrayArgs.indexOf(o);switch(t.argTypes[o]){case"offset":var l=t.offsetArgIndex.indexOf(o);f=t.offsetArgs[l].array,c="+q"+l;case"array":c="p"+f+c;var h="l"+o,p="a"+f;if(0===t.arrayBlockIndices[f])1===s.count?"generic"===n[f]?s.lvalue?(a.push(["var ",h,"=",p,".get(",c,")"].join("")),e=e.replace(u,h),i.push([p,".set(",c,",",h,")"].join(""))):e=e.replace(u,[p,".get(",c,")"].join("")):e=e.replace(u,[p,"[",c,"]"].join("")):"generic"===n[f]?(a.push(["var ",h,"=",p,".get(",c,")"].join("")),e=e.replace(u,h),s.lvalue&&i.push([p,".set(",c,",",h,")"].join(""))):(a.push(["var ",h,"=",p,"[",c,"]"].join("")),e=e.replace(u,h),s.lvalue&&i.push([p,"[",c,"]=",h].join("")));else{for(var d=[s.name],v=[c],y=0;y<Math.abs(t.arrayBlockIndices[f]);y++)d.push("\\s*\\[([^\\]]+)\\]"),v.push("$"+(y+1)+"*t"+f+"b"+y);if(u=new RegExp(d.join(""),"g"),c=v.join("+"),"generic"===n[f])throw new Error("cwise: Generic arrays not supported in combination with blocks!");e=e.replace(u,[p,"[",c,"]"].join(""))}break;case"scalar":e=e.replace(u,"Y"+t.scalarArgs.indexOf(o));break;case"index":e=e.replace(u,"index");break;case"shape":e=e.replace(u,"shape")}}}return[a.join("\n"),e,i.join("\n")].join("\n").trim()}function o(r){for(var t=new Array(r.length),n=!0,e=0;e<r.length;++e){var a=r[e],i=a.match(/\d+/);i=i?i[0]:"",0===a.charAt(0)?t[e]="u"+a.charAt(1)+i:t[e]=a.charAt(0)+i,e>0&&(n=n&&t[e]===t[e-1])}return n?t[0]:t.join("")}r.exports=function(r,t){for(var n=t[1].length-Math.abs(r.arrayBlockIndices[0])|0,s=new Array(r.arrayArgs.length),u=new Array(r.arrayArgs.length),c=0;c<r.arrayArgs.length;++c)u[c]=t[2*c],s[c]=t[2*c+1];var f=[],l=[],h=[],p=[],d=[];for(c=0;c<r.arrayArgs.length;++c){r.arrayBlockIndices[c]<0?(h.push(0),p.push(n),f.push(n),l.push(n+r.arrayBlockIndices[c])):(h.push(r.arrayBlockIndices[c]),p.push(r.arrayBlockIndices[c]+n),f.push(0),l.push(r.arrayBlockIndices[c]));for(var v=[],y=0;y<s[c].length;y++)h[c]<=s[c][y]&&s[c][y]<p[c]&&v.push(s[c][y]-h[c]);d.push(v)}var g=["SS"],m=["'use strict'"],b=[];for(y=0;y<n;++y)b.push(["s",y,"=SS[",y,"]"].join(""));for(c=0;c<r.arrayArgs.length;++c){for(g.push("a"+c),g.push("t"+c),g.push("p"+c),y=0;y<n;++y)b.push(["t",c,"p",y,"=t",c,"[",h[c]+y,"]"].join(""));for(y=0;y<Math.abs(r.arrayBlockIndices[c]);++y)b.push(["t",c,"b",y,"=t",c,"[",f[c]+y,"]"].join(""))}for(c=0;c<r.scalarArgs.length;++c)g.push("Y"+c);if(r.shapeArgs.length>0&&b.push("shape=SS.slice(0)"),r.indexArgs.length>0){var _=new Array(n);for(c=0;c<n;++c)_[c]="0";b.push(["index=[",_.join(","),"]"].join(""))}for(c=0;c<r.offsetArgs.length;++c){var w=r.offsetArgs[c],A=[];for(y=0;y<w.offset.length;++y)0!==w.offset[y]&&(1===w.offset[y]?A.push(["t",w.array,"p",y].join("")):A.push([w.offset[y],"*t",w.array,"p",y].join("")));0===A.length?b.push("q"+c+"=0"):b.push(["q",c,"=",A.join("+")].join(""))}var x=e([].concat(r.pre.thisVars).concat(r.body.thisVars).concat(r.post.thisVars));for((b=b.concat(x)).length>0&&m.push("var "+b.join(",")),c=0;c<r.arrayArgs.length;++c)m.push("p"+c+"|=0");r.pre.body.length>3&&m.push(i(r.pre,r,u));var E=i(r.body,r,u),T=function(r){for(var t=0,n=r[0].length;t<n;){for(var e=1;e<r.length;++e)if(r[e][t]!==r[0][t])return t;++t}return t}(d);T<n?m.push(function(r,t,n,e){for(var i=t.length,o=n.arrayArgs.length,s=n.blockSize,u=n.indexArgs.length>0,c=[],f=0;f<o;++f)c.push(["var offset",f,"=p",f].join(""));for(f=r;f<i;++f)c.push(["for(var j"+f+"=SS[",t[f],"]|0;j",f,">0;){"].join("")),c.push(["if(j",f,"<",s,"){"].join("")),c.push(["s",t[f],"=j",f].join("")),c.push(["j",f,"=0"].join("")),c.push(["}else{s",t[f],"=",s].join("")),c.push(["j",f,"-=",s,"}"].join("")),u&&c.push(["index[",t[f],"]=j",f].join(""));for(f=0;f<o;++f){for(var l=["offset"+f],h=r;h<i;++h)l.push(["j",h,"*t",f,"p",t[h]].join(""));c.push(["p",f,"=(",l.join("+"),")"].join(""))}for(c.push(a(t,n,e)),f=r;f<i;++f)c.push("}");return c.join("\n")}(T,d[0],r,E)):m.push(a(d[0],r,E)),r.post.body.length>3&&m.push(i(r.post,r,u)),r.debug&&console.log("-----Generated cwise routine for ",t,":\n"+m.join("\n")+"\n----------");var j=[r.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",T,o(u)].join("");return new Function(["function ",j,"(",g.join(","),"){",m.join("\n"),"} return ",j].join(""))()}},644:(r,t,n)=>{var e=n(121);r.exports=function(r){var t=["'use strict'","var CACHED={}"],n=[],a=r.funcName+"_cwise_thunk";t.push(["return function ",a,"(",r.shimArgs.join(","),"){"].join(""));for(var i=[],o=[],s=[["array",r.arrayArgs[0],".shape.slice(",Math.max(0,r.arrayBlockIndices[0]),r.arrayBlockIndices[0]<0?","+r.arrayBlockIndices[0]+")":")"].join("")],u=[],c=[],f=0;f<r.arrayArgs.length;++f){var l=r.arrayArgs[f];n.push(["t",l,"=array",l,".dtype,","r",l,"=array",l,".order"].join("")),i.push("t"+l),i.push("r"+l),o.push("t"+l),o.push("r"+l+".join()"),s.push("array"+l+".data"),s.push("array"+l+".stride"),s.push("array"+l+".offset|0"),f>0&&(u.push("array"+r.arrayArgs[0]+".shape.length===array"+l+".shape.length+"+(Math.abs(r.arrayBlockIndices[0])-Math.abs(r.arrayBlockIndices[f]))),c.push("array"+r.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[0])+"]===array"+l+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[f])+"]"))}for(r.arrayArgs.length>1&&(t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+r.arrayArgs[0]+".shape.length-"+Math.abs(r.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),t.push("if (!("+c.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}")),f=0;f<r.scalarArgs.length;++f)s.push("scalar"+r.scalarArgs[f]);return n.push(["type=[",o.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",s.join(","),")}"].join("")),r.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),new Function("compile",t.join("\n"))(e.bind(void 0,r))}},343:r=>{function t(r,n,e){var a=0|r[e];if(a<=0)return[];var i,o=new Array(a);if(e===r.length-1)for(i=0;i<a;++i)o[i]=n;else for(i=0;i<a;++i)o[i]=t(r,n,e+1);return o}r.exports=function(r,n){switch(void 0===n&&(n=0),typeof r){case"number":if(r>0)return function(r,t){var n,e;for(n=new Array(r),e=0;e<r;++e)n[e]=t;return n}(0|r,n);break;case"object":if("number"==typeof r.length)return t(r,n,0)}return[]}},219:r=>{r.exports=function(r){for(var t=new Array(r),n=0;n<r;++n)t[n]=n;return t}},206:r=>{function t(r){return!!r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}r.exports=function(r){return null!=r&&(t(r)||function(r){return"function"==typeof r.readFloatLE&&"function"==typeof r.slice&&t(r.slice(0,0))}(r)||!!r._isBuffer)}},231:(r,t,n)=>{var e=n(543),a={body:"",args:[],thisVars:[],localVars:[]};function i(r){if(!r)return a;for(var t=0;t<r.args.length;++t){var n=r.args[t];r.args[t]=0===t?{name:n,lvalue:!0,rvalue:!!r.rvalue,count:r.count||1}:{name:n,lvalue:!1,rvalue:!0,count:1}}return r.thisVars||(r.thisVars=[]),r.localVars||(r.localVars=[]),r}function o(r){for(var t=[],n=0;n<r.args.length;++n)t.push("a"+n);return new Function("P",["return function ",r.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""))(function(r){return e({args:r.args,pre:i(r.pre),body:i(r.body),post:i(r.proc),funcName:r.funcName})}(r))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var r in s){var n=s[r];t[r]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+n+"c"},funcName:r}),t[r+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+n+"=b"},rvalue:!0,funcName:r+"eq"}),t[r+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+n+"s"},funcName:r+"s"}),t[r+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+n+"=s"},rvalue:!0,funcName:r+"seq"})}}();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var r in u){var n=u[r];t[r]=o({args:["array","array"],body:{args:["a","b"],body:"a="+n+"b"},funcName:r}),t[r+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+n+"a"},rvalue:!0,count:2,funcName:r+"eq"})}}();var c={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var r in c){var n=c[r];t[r]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+n+"c"},funcName:r}),t[r+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+n+"s"},funcName:r+"s"}),t[r+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+n+"b"},rvalue:!0,count:2,funcName:r+"eq"}),t[r+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+n+"s"},rvalue:!0,count:2,funcName:r+"seq"})}}();var f=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var r=0;r<f.length;++r){var n=f[r];t[n]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:n}),t[n+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"eq"})}}();var l=["max","min","atan2","pow"];!function(){for(var r=0;r<l.length;++r){var n=l[r];t[n]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:n}),t[n+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:n+"s"}),t[n+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"eq"}),t[n+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"seq"})}}();var h=["atan2","pow"];!function(){for(var r=0;r<h.length;++r){var n=h[r];t[n+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:n+"op"}),t[n+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:n+"ops"}),t[n+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"opeq"}),t[n+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"opseq"})}}(),t.any=e({args:["array"],pre:a,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=e({args:["array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=e({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=e({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=e({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=e({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=e({args:["array","array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},61:(r,t,n)=>{var e=n(655),a=n(231),i=n(139);t.clone=function(r){var t=r.dtype;"generic"!==t&&"array"!==t||(t="double");var n=i.malloc(r.size,t),o=e(n,r.shape);return a.assign(o,r),o},t.malloc=function(r,t){t||(t="double");for(var n=1,a=new Array(r.length),o=r.length-1;o>=0;--o)a[o]=n,n*=r[o];return e(i.malloc(n,t),r,a,0)},t.free=function(r){"generic"!==r.dtype&&"array"!==r.dtype&&i.free(r.data)},t.zeros=function(r,t){t||(t="double");for(var n=1,a=new Array(r.length),o=r.length-1;o>=0;--o)a[o]=n,n*=r[o];var s=i.malloc(n,t);for(o=0;o<n;++o)s[o]=0;return e(s,r,a,0)},t.ones=function(r,t){t||(t="double");for(var n=1,a=new Array(r.length),o=r.length-1;o>=0;--o)a[o]=n,n*=r[o];var s=i.malloc(n,t);for(o=0;o<n;++o)s[o]=1;return e(s,r,a,0)},t.eye=function(r,t){var n,a;t||(t="double");var o=1,s=new Array(r.length);for(n=r.length-1;n>=0;--n)s[n]=o,o*=r[n];var u=i.malloc(o,t);for(n=0;n<o;++n)u[n]=0;var c=1/0,f=0;for(n=r.length-1;n>=0;n--)f+=s[n],c=Math.min(c,r[n]);for(n=0,a=0;n<c;n++,a+=f)u[a]=1;return e(u,r,s,0)}},655:(r,t,n)=>{var e=n(219),a=n(206),i="undefined"!=typeof Float64Array;function o(r,t){return r[0]-t[0]}function s(){var r,t=this.stride,n=new Array(t.length);for(r=0;r<n.length;++r)n[r]=[Math.abs(t[r]),r];n.sort(o);var e=new Array(n.length);for(r=0;r<e.length;++r)e[r]=n[r][1];return e}function u(r,t){var n=["View",t,"d",r].join("");t<0&&(n="View_Nil"+r);var a="generic"===r;if(-1===t){var i="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+r+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}";return new Function(i)()}if(0===t)return i="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+r+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(a?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(a?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",new Function("TrivialArray",i)(c[r][0]);i=["'use strict'"];var o=e(t),u=o.map((function(r){return"i"+r})),f="this.offset+"+o.map((function(r){return"this.stride["+r+"]*i"+r})).join("+"),l=o.map((function(r){return"b"+r})).join(","),h=o.map((function(r){return"c"+r})).join(",");i.push("function "+n+"(a,"+l+","+h+",d){this.data=a","this.shape=["+l+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+r+"'","proto.dimension="+t),i.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+o.map((function(r){return"this.shape["+r+"]"})).join("*"),"}})"),1===t?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),t<4?(i.push("function "+n+"_order(){"),2===t?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+n+"_set("+u.join(",")+",v){"),a?i.push("return this.data.set("+f+",v)}"):i.push("return this.data["+f+"]=v}"),i.push("proto.get=function "+n+"_get("+u.join(",")+"){"),a?i.push("return this.data.get("+f+")}"):i.push("return this.data["+f+"]}"),i.push("proto.index=function "+n+"_index(",u.join(),"){return "+f+"}"),i.push("proto.hi=function "+n+"_hi("+u.join(",")+"){return new "+n+"(this.data,"+o.map((function(r){return["(typeof i",r,"!=='number'||i",r,"<0)?this.shape[",r,"]:i",r,"|0"].join("")})).join(",")+","+o.map((function(r){return"this.stride["+r+"]"})).join(",")+",this.offset)}");var p=o.map((function(r){return"a"+r+"=this.shape["+r+"]"})),d=o.map((function(r){return"c"+r+"=this.stride["+r+"]"}));i.push("proto.lo=function "+n+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+d.join(","));for(var v=0;v<t;++v)i.push("if(typeof i"+v+"==='number'&&i"+v+">=0){d=i"+v+"|0;b+=c"+v+"*d;a"+v+"-=d}");for(i.push("return new "+n+"(this.data,"+o.map((function(r){return"a"+r})).join(",")+","+o.map((function(r){return"c"+r})).join(",")+",b)}"),i.push("proto.step=function "+n+"_step("+u.join(",")+"){var "+o.map((function(r){return"a"+r+"=this.shape["+r+"]"})).join(",")+","+o.map((function(r){return"b"+r+"=this.stride["+r+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil"),v=0;v<t;++v)i.push("if(typeof i"+v+"==='number'){d=i"+v+"|0;if(d<0){c+=b"+v+"*(a"+v+"-1);a"+v+"=ceil(-a"+v+"/d)}else{a"+v+"=ceil(a"+v+"/d)}b"+v+"*=d}");i.push("return new "+n+"(this.data,"+o.map((function(r){return"a"+r})).join(",")+","+o.map((function(r){return"b"+r})).join(",")+",c)}");var y=new Array(t),g=new Array(t);for(v=0;v<t;++v)y[v]="a[i"+v+"]",g[v]="b[i"+v+"]";for(i.push("proto.transpose=function "+n+"_transpose("+u+"){"+u.map((function(r,t){return r+"=("+r+"===undefined?"+t+":"+r+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+y.join(",")+","+g.join(",")+",this.offset)}"),i.push("proto.pick=function "+n+"_pick("+u+"){var a=[],b=[],c=this.offset"),v=0;v<t;++v)i.push("if(typeof i"+v+"==='number'&&i"+v+">=0){c=(c+this.stride["+v+"]*i"+v+")|0}else{a.push(this.shape["+v+"]);b.push(this.stride["+v+"])}");return i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+o.map((function(r){return"shape["+r+"]"})).join(",")+","+o.map((function(r){return"stride["+r+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",i.join("\n"))(c[r],s)}var c={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};r.exports=function(r,t,n,e){if(void 0===r)return(0,c.array[0])([]);"number"==typeof r&&(r=[r]),void 0===t&&(t=[r.length]);var o=t.length;if(void 0===n){n=new Array(o);for(var s=o-1,f=1;s>=0;--s)n[s]=f,f*=t[s]}if(void 0===e)for(e=0,s=0;s<o;++s)n[s]<0&&(e-=(t[s]-1)*n[s]);for(var l=function(r){if(a(r))return"buffer";if(i)switch(Object.prototype.toString.call(r)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(r)?"array":"generic"}(r),h=c[l];h.length<=o+1;)h.push(u(l,h.length-1));return(0,h[o+1])(r,t,n,e)}},139:(r,t,n)=>{var e=n(973),a=n(343),i=n(573).Buffer;n.g.__TYPEDARRAY_POOL||(n.g.__TYPEDARRAY_POOL={UINT8:a([32,0]),UINT16:a([32,0]),UINT32:a([32,0]),BIGUINT64:a([32,0]),INT8:a([32,0]),INT16:a([32,0]),INT32:a([32,0]),BIGINT64:a([32,0]),FLOAT:a([32,0]),DOUBLE:a([32,0]),DATA:a([32,0]),UINT8C:a([32,0]),BUFFER:a([32,0])});var o="undefined"!=typeof Uint8ClampedArray,s="undefined"!=typeof BigUint64Array,u="undefined"!=typeof BigInt64Array,c=n.g.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=a([32,0])),c.BIGUINT64||(c.BIGUINT64=a([32,0])),c.BIGINT64||(c.BIGINT64=a([32,0])),c.BUFFER||(c.BUFFER=a([32,0]));var f=c.DATA,l=c.BUFFER;function h(r){if(r){var t=r.length||r.byteLength,n=e.log2(t);f[n].push(r)}}function p(r){r=e.nextPow2(r);var t=e.log2(r),n=f[t];return n.length>0?n.pop():new ArrayBuffer(r)}function d(r){return new Uint8Array(p(r),0,r)}function v(r){return new Uint16Array(p(2*r),0,r)}function y(r){return new Uint32Array(p(4*r),0,r)}function g(r){return new Int8Array(p(r),0,r)}function m(r){return new Int16Array(p(2*r),0,r)}function b(r){return new Int32Array(p(4*r),0,r)}function _(r){return new Float32Array(p(4*r),0,r)}function w(r){return new Float64Array(p(8*r),0,r)}function A(r){return o?new Uint8ClampedArray(p(r),0,r):d(r)}function x(r){return s?new BigUint64Array(p(8*r),0,r):null}function E(r){return u?new BigInt64Array(p(8*r),0,r):null}function T(r){return new DataView(p(r),0,r)}function j(r){r=e.nextPow2(r);var t=e.log2(r),n=l[t];return n.length>0?n.pop():new i(r)}t.free=function(r){if(i.isBuffer(r))l[e.log2(r.length)].push(r);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(r)&&(r=r.buffer),!r)return;var t=r.length||r.byteLength,n=0|e.log2(t);f[n].push(r)}},t.freeUint8=t.freeUint16=t.freeUint32=t.freeBigUint64=t.freeInt8=t.freeInt16=t.freeInt32=t.freeBigInt64=t.freeFloat32=t.freeFloat=t.freeFloat64=t.freeDouble=t.freeUint8Clamped=t.freeDataView=function(r){h(r.buffer)},t.freeArrayBuffer=h,t.freeBuffer=function(r){l[e.log2(r.length)].push(r)},t.malloc=function(r,t){if(void 0===t||"arraybuffer"===t)return p(r);switch(t){case"uint8":return d(r);case"uint16":return v(r);case"uint32":return y(r);case"int8":return g(r);case"int16":return m(r);case"int32":return b(r);case"float":case"float32":return _(r);case"double":case"float64":return w(r);case"uint8_clamped":return A(r);case"bigint64":return E(r);case"biguint64":return x(r);case"buffer":return j(r);case"data":case"dataview":return T(r);default:return null}return null},t.mallocArrayBuffer=p,t.mallocUint8=d,t.mallocUint16=v,t.mallocUint32=y,t.mallocInt8=g,t.mallocInt16=m,t.mallocInt32=b,t.mallocFloat32=t.mallocFloat=_,t.mallocFloat64=t.mallocDouble=w,t.mallocUint8Clamped=A,t.mallocBigUint64=x,t.mallocBigInt64=E,t.mallocDataView=T,t.mallocBuffer=j,t.clearCache=function(){for(var r=0;r<32;++r)c.UINT8[r].length=0,c.UINT16[r].length=0,c.UINT32[r].length=0,c.INT8[r].length=0,c.INT16[r].length=0,c.INT32[r].length=0,c.FLOAT[r].length=0,c.DOUBLE[r].length=0,c.BIGUINT64[r].length=0,c.BIGINT64[r].length=0,c.UINT8C[r].length=0,f[r].length=0,l[r].length=0}},887:r=>{r.exports=function(r,t,n){return 0===r.length?r:t?(n||r.sort(t),function(r,t){for(var n=1,e=r.length,a=r[0],i=r[0],o=1;o<e;++o)if(i=a,t(a=r[o],i)){if(o===n){n++;continue}r[n++]=a}return r.length=n,r}(r,t)):(n||r.sort(),function(r){for(var t=1,n=r.length,e=r[0],a=r[0],i=1;i<n;++i,a=e)if(a=e,(e=r[i])!==a){if(i===t){t++;continue}r[t++]=e}return r.length=t,r}(r))}},300:(r,t,n)=>{const e=n(713),a=n(650);r.exports=(r,t,n)=>{if(t&&"v2"!=t){if("v3"==t)return a(r,n);throw Error(`version ${t} not recognized`)}return e(r)}},713:(r,t,n)=>{const{gunzipSync:e,unzlibSync:a}=n(419),i=n(655),o=n(231),{parallel:s}=n(500),u=n(61),c=n(92);r.exports=r=>{if(r||(r=window.fetch),!r)throw new Error("no request function defined");const t=async(t,n,e)=>{let a;try{a=await r(t)}catch(r){return"arraybuffer"===n&&"ENOENT"===r.code?e(null,null):e(new Error("error evaluating fetching function"))}if(a&&Buffer.isBuffer(a))return e(null,a);if(a&&a.status&&200===a.status){let r;if("text"===n)r=await a.text();else{if("arraybuffer"!==n)return e(new Error("unsupported file format"));r=await a.arrayBuffer()}return r?e(null,r):e(new Error("failed to parse data"))}return"arraybuffer"===n&&a&&a.status&&[403,404].includes(a.status)?e(null,null):e(new Error("resource not found"))},n=(r,n,e)=>{const a=e=>{const a=v(e).map((n=>a=>{t(r+"/"+n,"arraybuffer",((r,t)=>{if(r)return a(r);const i={};i[n]=h(t,e),a(null,i)}))}));s(a,((r,t)=>{if(r)return n(r);n(null,p(t,e))}))};e?a(e):t(r+"/.zarray","text",((r,t)=>{if(r)return n(r);const e=l(t);a(e)}))},f=(r,n,e)=>{const a=e=>{const a=v(e);e.keys=a,n(null,(function(n,i){const o=n.join(".");if(!a.includes(o))return i(new Error("chunk "+o+" not found",null));t(r+"/"+o,"arraybuffer",((r,t)=>{if(r)return i(r);const n=h(t,e);i(null,n)}))}))};e?a(e):t(r+"/.zarray","text",((r,t)=>{if(r)return n(r);const e=l(t);a(e)}))},l=r=>JSON.parse(r),h=(r,t)=>{if(r){if(r=Buffer.isBuffer(r)?r:Buffer.from(r),t.compressor)if("zlib"===t.compressor.id)r=a(r);else{if("gzip"!==t.compressor.id)throw new Error("compressor "+t.compressor.id+" is not supported");r=e(r)}const n=t.dtype;if(n.startsWith("|S")){const t=parseInt(n.split("|S")[1]);r=new g["|S"](t,1)(r.buffer)}else if(t.dtype.startsWith("<U")){const t=parseInt(n.split("<U")[1]);r=new g["<U"](t,4)(r.buffer)}else r=new g[t.dtype](r.buffer)}else{const n=t.chunks.reduce(((r,t)=>r*t),1);r=Array(n).fill(t.fill_value)}return i(r,t.chunks)},p=(r,t)=>{const n=Object.values(r[0])[0].dtype,e=t.shape.map(((r,n)=>{const e=t.chunks[n];return Math.floor(r/e)*e+(r%e>0)*e}));let a;if(a="array"===n?i(new Array(e.reduce(((r,t)=>r*t),1)),e):u.zeros(e,n),r.forEach((r=>{const n=Object.keys(r)[0].split(".").map((r=>parseInt(r))),e=Object.values(r)[0],i=n.map(((r,n)=>r*t.chunks[n])),s=t.chunks;let u=a.lo.apply(a,i);u=u.hi.apply(u,s),o.assign(u,e)})),t.shape.every(((r,t)=>r===a.shape[t])))return a;{const r=u.zeros(t.shape,n);return o.assign(r,a.hi.apply(a,t.shape)),u.free(a),r}},d=r=>{const t=Object.keys(r).filter((r=>r.includes(".zarray"))),n={};return t.forEach((t=>{n[t.replace("/.zarray","")]=r[t]})),n},v=r=>{const t=[];for(let n=0;n<r.shape.length;n++){const e=[];let a=0,i=0;for(;i<r.shape[n];)e.push(a),i+=r.chunks[n],a+=1;t.push(e)}return c(t).map((r=>r.join(".")))};function y(r,t){return n=>{const e=n.byteLength/(r*t),a=[];for(let i=0;i<e;i++){const e=n.slice(i*t*r,(i+1)*t*r),o=[];for(let n=0;n<r;n++){const r=Buffer.from(e.slice(n*t,(n+1)*t)).toString("utf8");o.push(r.replace(/\x00/g,""))}a.push(o.join(""))}return a}}const g={"<i1":Int8Array,"<u1":Uint8Array,"|b1":function(r){const t=new Uint8Array(r);return Array.from(t).map((r=>1===r))},"|u1":Uint8Array,"<i2":Int16Array,"<u2":Uint16Array,"<i4":Int32Array,"<u4":Uint32Array,"<f4":Float32Array,"<f8":Float64Array,"<U":y,"|S":y};return{load:n,open:f,openGroup:(r,n,e,a)=>{const i=t=>{if(!Object.keys(t).includes("zarr_consolidated_format"))return n(new Error("metadata is not consolidated",null));const a=d(t.metadata);let i=Object.keys(a);e&&e.length>0&&(i=i.filter((r=>e.includes(r))));const o=i.map((t=>function(n){f(r+"/"+t,n,a[t])}));s(o,((r,e)=>{if(r)return n(r);const a={};i.forEach(((r,t)=>{a[r]=e[t]})),n(null,a,t)}))};a?i(a):t(r+"/.zmetadata","text",((r,t)=>{if(r)return n(r);const e=l(t);i(e)}))},loadGroup:(r,e,a,i)=>{const o=t=>{if(!Object.keys(t).includes("zarr_consolidated_format"))return e(new Error("metadata is not consolidated",null));const i=d(t.metadata);let o=Object.keys(i);a&&a.length>0&&(o=o.filter((r=>a.includes(r))));const u=o.map((t=>function(e){n(r+"/"+t,e,i[t])}));s(u,((r,n)=>{if(r)return e(r);const a={};o.forEach(((r,t)=>{a[r]=n[t]})),e(null,a,t)}))};i?o(i):t(r+"/.zmetadata","text",((r,t)=>{if(r)return e(r);const n=l(t);o(n)}))}}}},650:(r,t,n)=>{const{gunzipSync:e,unzlibSync:a}=n(419),i=n(655),{parallel:o}=(n(231),n(500)),s=(n(61),n(92));r.exports=(r,t={})=>{let n=!0;if(t.hasOwnProperty("useSuffixRequest")&&(n=t.useSuffixRequest),r||(r=window.fetch),!r)throw new Error("no request function defined");const o=async(t,n,e,a)=>{let i;try{i=await r(t,n)}catch(r){return"arraybuffer"===e&&"ENOENT"===r.code?a(null,null):a(new Error("error evaluating fetching function"))}if(i&&Buffer.isBuffer(i))return a(null,i);if(i&&i.status&&(200===i.status||206===i.status)){let r;if("text"===e)r=await i.text();else{if("arraybuffer"!==e)return a(new Error("unsupported file format"));r=await i.arrayBuffer()}return r?a(null,r):a(new Error("failed to parse data"))}return"arraybuffer"===e&&i&&i.status&&[403,404].includes(i.status)?a(null,null):a(new Error("resource not found"))},u=(r,t,n,o,s)=>{if(r){if(r=Buffer.isBuffer(r)?r:Buffer.from(r),"gzip"==s.name)r=e(r);else{if("blosc"!=s.name||"zlib"!=s.configuration.cname)throw new Error("compressor "+compressor+" is not supported");r=a(r)}r=new c[t](r.buffer)}else{const e=n.reduce(((r,t)=>r*t),1);r=new c[t](e).fill(o)}return i(r,n)},c={uint8:Uint8Array,int16:Int16Array,int32:Int32Array,float32:Float32Array,float64:Float64Array};return{open:(t,e,a)=>{const i={},c=a=>{const c="sharding_indexed"==a.codecs[0].name,f=a.shape,l=c?a.codecs[0].configuration.chunk_shape:a.chunk_grid.configuration.chunk_shape,h=a.data_type,p=a.chunk_key_encoding.configuration.separator,d=a.fill_value,v=c?a.codecs[0].configuration.codecs[0]:a.codecs[0],y=((r,t,n)=>{const e=[];for(let n=0;n<r.length;n++){const a=[];let i=0,o=0;for(;o<r[n];)a.push(i),o+=t[n],i+=1;e.push(a)}return s(e).map((r=>r.join(n)))})(f,l,p);e(null,c?async function(e,s){if(e.length!=f.length||e.length!=l.length)return s(new Error("key dimensionality must match array shape and chunk shape"));const c=[],g=a.chunk_grid.configuration.chunk_shape.map(((r,t)=>r/l[t]));for(let r=0;r<e.length;r++)c.push(Math.floor(e[r]/g[r]));const m=c.join(p),b=t+"/c/"+m,_=16*g.reduce(((r,t)=>r*t),1);if(!y.includes(m))return s(new Error("storage key "+m+" not found",null));const w=r=>{const t=e.map(((r,t)=>r%g[t])),n=((r,t)=>{let n=1,e=0;for(let a=r.length-1;a>=0;a--)e+=t[a]*n,n*=r[a];return e})(g,t);if(18446744073709551615n===r[2*n]&&18446744073709551615n===r[2*n+1]){const r=u(null,h,l,d,v);s(null,r)}else{const t=`bytes=${r[2*n]}-${parseInt(r[2*n]+r[2*n+1])-1}`;o(b,{headers:{Range:t}},"arraybuffer",((r,t)=>{if(r)return s(r);const n=u(t,h,l,d,v);s(null,n)}))}};i[m]?w(i[m]):n?o(b,{headers:{Range:`bytes=-${_+4}`}},"arraybuffer",((r,t)=>{if(r)return s(r);const n=new BigUint64Array(new Buffer.from(t).buffer.slice(0,_));i[m]=n,w(i[m])})):r(b,{method:"HEAD"}).then((r=>{const t=r.headers.get("Content-Length");if(t){const r=Number(t);o(b,{headers:{Range:`bytes=${r-(_+4)}-${r-4-1}`}},"arraybuffer",((r,t)=>{if(r)return s(r);const n=new BigUint64Array(Buffer.from(t).buffer);i[m]=n,w(i[m])}))}}))}:function(r,n){if(r.length!=f.length||r.length!=l.length)return n(new Error("key dimensionality must match array shape and chunk shape"));const e=r.join(p);if(!y.includes(e))return n(new Error("storage key "+e+" not found",null));o(t+"/c/"+e,{},"arraybuffer",((r,t)=>{if(r)return n(r);const e=u(t,h,l,d,v);n(null,e)}))})};a?c(a):o(t+"/zarr.json",{},"text",((r,t)=>{if(r)return e(r);const n=(a=t,JSON.parse(a));var a;c(n)}))}}}},573:()=>{},419:(r,t,n)=>{var e=n(891),a=Uint8Array,i=Uint16Array,o=Uint32Array,s=new a([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),u=new a([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c=new a([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=function(r,t){for(var n=new i(31),e=0;e<31;++e)n[e]=t+=1<<r[e-1];var a=new o(n[30]);for(e=1;e<30;++e)for(var s=n[e];s<n[e+1];++s)a[s]=s-n[e]<<5|e;return[n,a]},l=f(s,2),h=l[0],p=l[1];h[28]=258,p[258]=28;for(var d=f(u,0),v=d[0],y=d[1],g=new i(32768),m=0;m<32768;++m){var b=(43690&m)>>>1|(21845&m)<<1;b=(61680&(b=(52428&b)>>>2|(13107&b)<<2))>>>4|(3855&b)<<4,g[m]=((65280&b)>>>8|(255&b)<<8)>>>1}var _=function(r,t,n){for(var e=r.length,a=0,o=new i(t);a<e;++a)r[a]&&++o[r[a]-1];var s,u=new i(t);for(a=0;a<t;++a)u[a]=u[a-1]+o[a-1]<<1;if(n){s=new i(1<<t);var c=15-t;for(a=0;a<e;++a)if(r[a])for(var f=a<<4|r[a],l=t-r[a],h=u[r[a]-1]++<<l,p=h|(1<<l)-1;h<=p;++h)s[g[h]>>>c]=f}else for(s=new i(e),a=0;a<e;++a)r[a]&&(s[a]=g[u[r[a]-1]++]>>>15-r[a]);return s},w=new a(288);for(m=0;m<144;++m)w[m]=8;for(m=144;m<256;++m)w[m]=9;for(m=256;m<280;++m)w[m]=7;for(m=280;m<288;++m)w[m]=8;var A=new a(32);for(m=0;m<32;++m)A[m]=5;var x=_(w,9,0),E=_(w,9,1),T=_(A,5,0),j=_(A,5,1),k=function(r){for(var t=r[0],n=1;n<r.length;++n)r[n]>t&&(t=r[n]);return t},I=function(r,t,n){var e=t/8|0;return(r[e]|r[e+1]<<8)>>(7&t)&n},S=function(r,t){var n=t/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(7&t)},R=function(r){return(r+7)/8|0},L=function(r,t,n){(null==t||t<0)&&(t=0),(null==n||n>r.length)&&(n=r.length);var e=new(2==r.BYTES_PER_ELEMENT?i:4==r.BYTES_PER_ELEMENT?o:a)(n-t);return e.set(r.subarray(t,n)),e};t.FlateErrorCode={UnexpectedEOF:0,InvalidBlockType:1,InvalidLengthLiteral:2,InvalidDistance:3,StreamFinished:4,NoStreamHandler:5,InvalidHeader:6,NoCallback:7,InvalidUTF8:8,ExtraFieldTooLong:9,InvalidDate:10,FilenameTooLong:11,StreamFinishing:12,InvalidZipData:13,UnknownCompressionMethod:14};var B=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],V=function(r,t,n){var e=new Error(t||B[r]);if(e.code=r,Error.captureStackTrace&&Error.captureStackTrace(e,V),!n)throw e;return e},U=function(r,t,n){var e=r.length;if(!e||n&&n.f&&!n.l)return t||new a(0);var i=!t||n,o=!n||n.i;n||(n={}),t||(t=new a(3*e));var f=function(r){var n=t.length;if(r>n){var e=new a(Math.max(2*n,r));e.set(t),t=e}},l=n.f||0,p=n.p||0,d=n.b||0,y=n.l,g=n.d,m=n.m,b=n.n,w=8*e;do{if(!y){l=I(r,p,1);var A=I(r,p+1,3);if(p+=3,!A){var x=r[(C=R(p)+4)-4]|r[C-3]<<8,T=C+x;if(T>e){o&&V(0);break}i&&f(d+x),t.set(r.subarray(C,T),d),n.b=d+=x,n.p=p=8*T,n.f=l;continue}if(1==A)y=E,g=j,m=9,b=5;else if(2==A){var B=I(r,p,31)+257,U=I(r,p+10,15)+4,F=B+I(r,p+5,31)+1;p+=14;for(var M=new a(F),O=new a(19),N=0;N<U;++N)O[c[N]]=I(r,p+3*N,7);p+=3*U;var D=k(O),z=(1<<D)-1,P=_(O,D,1);for(N=0;N<F;){var C,q=P[I(r,p,z)];if(p+=15&q,(C=q>>>4)<16)M[N++]=C;else{var $=0,G=0;for(16==C?(G=3+I(r,p,3),p+=2,$=M[N-1]):17==C?(G=3+I(r,p,7),p+=3):18==C&&(G=11+I(r,p,127),p+=7);G--;)M[N++]=$}}var X=M.subarray(0,B),W=M.subarray(B);m=k(X),b=k(W),y=_(X,m,1),g=_(W,b,1)}else V(1);if(p>w){o&&V(0);break}}i&&f(d+131072);for(var H=(1<<m)-1,Z=(1<<b)-1,Y=p;;Y=p){var J=($=y[S(r,p)&H])>>>4;if((p+=15&$)>w){o&&V(0);break}if($||V(2),J<256)t[d++]=J;else{if(256==J){Y=p,y=null;break}var Q=J-254;if(J>264){var K=s[N=J-257];Q=I(r,p,(1<<K)-1)+h[N],p+=K}var rr=g[S(r,p)&Z],tr=rr>>>4;if(rr||V(3),p+=15&rr,W=v[tr],tr>3&&(K=u[tr],W+=S(r,p)&(1<<K)-1,p+=K),p>w){o&&V(0);break}i&&f(d+131072);for(var nr=d+Q;d<nr;d+=4)t[d]=t[d-W],t[d+1]=t[d+1-W],t[d+2]=t[d+2-W],t[d+3]=t[d+3-W];d=nr}}n.l=y,n.p=Y,n.b=d,n.f=l,y&&(l=1,n.m=m,n.d=g,n.n=b)}while(!l);return d==t.length?t:L(t,0,d)},F=function(r,t,n){n<<=7&t;var e=t/8|0;r[e]|=n,r[e+1]|=n>>>8},M=function(r,t,n){n<<=7&t;var e=t/8|0;r[e]|=n,r[e+1]|=n>>>8,r[e+2]|=n>>>16},O=function(r,t){for(var n=[],e=0;e<r.length;++e)r[e]&&n.push({s:e,f:r[e]});var o=n.length,s=n.slice();if(!o)return[$,0];if(1==o){var u=new a(n[0].s+1);return u[n[0].s]=1,[u,1]}n.sort((function(r,t){return r.f-t.f})),n.push({s:-1,f:25001});var c=n[0],f=n[1],l=0,h=1,p=2;for(n[0]={s:-1,f:c.f+f.f,l:c,r:f};h!=o-1;)c=n[n[l].f<n[p].f?l++:p++],f=n[l!=h&&n[l].f<n[p].f?l++:p++],n[h++]={s:-1,f:c.f+f.f,l:c,r:f};var d=s[0].s;for(e=1;e<o;++e)s[e].s>d&&(d=s[e].s);var v=new i(d+1),y=N(n[h-1],v,0);if(y>t){e=0;var g=0,m=y-t,b=1<<m;for(s.sort((function(r,t){return v[t.s]-v[r.s]||r.f-t.f}));e<o;++e){var _=s[e].s;if(!(v[_]>t))break;g+=b-(1<<y-v[_]),v[_]=t}for(g>>>=m;g>0;){var w=s[e].s;v[w]<t?g-=1<<t-v[w]++-1:++e}for(;e>=0&&g;--e){var A=s[e].s;v[A]==t&&(--v[A],++g)}y=t}return[new a(v),y]},N=function(r,t,n){return-1==r.s?Math.max(N(r.l,t,n+1),N(r.r,t,n+1)):t[r.s]=n},D=function(r){for(var t=r.length;t&&!r[--t];);for(var n=new i(++t),e=0,a=r[0],o=1,s=function(r){n[e++]=r},u=1;u<=t;++u)if(r[u]==a&&u!=t)++o;else{if(!a&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(a),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(a);o=1,a=r[u]}return[n.subarray(0,e),t]},z=function(r,t){for(var n=0,e=0;e<t.length;++e)n+=r[e]*t[e];return n},P=function(r,t,n){var e=n.length,a=R(t+2);r[a]=255&e,r[a+1]=e>>>8,r[a+2]=255^r[a],r[a+3]=255^r[a+1];for(var i=0;i<e;++i)r[a+i+4]=n[i];return 8*(a+4+e)},C=function(r,t,n,e,a,o,f,l,h,p,d){F(t,d++,n),++a[256];for(var v=O(a,15),y=v[0],g=v[1],m=O(o,15),b=m[0],E=m[1],j=D(y),k=j[0],I=j[1],S=D(b),R=S[0],L=S[1],B=new i(19),V=0;V<k.length;++V)B[31&k[V]]++;for(V=0;V<R.length;++V)B[31&R[V]]++;for(var U=O(B,7),N=U[0],C=U[1],q=19;q>4&&!N[c[q-1]];--q);var $,G,X,W,H=p+5<<3,Z=z(a,w)+z(o,A)+f,Y=z(a,y)+z(o,b)+f+14+3*q+z(B,N)+(2*B[16]+3*B[17]+7*B[18]);if(H<=Z&&H<=Y)return P(t,d,r.subarray(h,h+p));if(F(t,d,1+(Y<Z)),d+=2,Y<Z){$=_(y,g,0),G=y,X=_(b,E,0),W=b;var J=_(N,C,0);for(F(t,d,I-257),F(t,d+5,L-1),F(t,d+10,q-4),d+=14,V=0;V<q;++V)F(t,d+3*V,N[c[V]]);d+=3*q;for(var Q=[k,R],K=0;K<2;++K){var rr=Q[K];for(V=0;V<rr.length;++V){var tr=31&rr[V];F(t,d,J[tr]),d+=N[tr],tr>15&&(F(t,d,rr[V]>>>5&127),d+=rr[V]>>>12)}}}else $=x,G=w,X=T,W=A;for(V=0;V<l;++V)if(e[V]>255){tr=e[V]>>>18&31,M(t,d,$[tr+257]),d+=G[tr+257],tr>7&&(F(t,d,e[V]>>>23&31),d+=s[tr]);var nr=31&e[V];M(t,d,X[nr]),d+=W[nr],nr>3&&(M(t,d,e[V]>>>5&8191),d+=u[nr])}else M(t,d,$[e[V]]),d+=G[e[V]];return M(t,d,$[256]),d+G[256]},q=new o([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),$=new a(0),G=function(r,t,n,e,c,f){var l=r.length,h=new a(e+l+5*(1+Math.ceil(l/7e3))+c),d=h.subarray(e,h.length-c),v=0;if(!t||l<8)for(var g=0;g<=l;g+=65535){var m=g+65535;m>=l&&(d[v>>3]=f),v=P(d,v+1,r.subarray(g,m))}else{for(var b=q[t-1],_=b>>>13,w=8191&b,A=(1<<n)-1,x=new i(32768),E=new i(A+1),T=Math.ceil(n/3),j=2*T,k=function(t){return(r[t]^r[t+1]<<T^r[t+2]<<j)&A},I=new o(25e3),S=new i(288),B=new i(32),V=0,U=0,F=(g=0,0),M=0,O=0;g<l;++g){var N=k(g),D=32767&g,z=E[N];if(x[D]=z,E[N]=D,M<=g){var G=l-g;if((V>7e3||F>24576)&&G>423){v=C(r,d,0,I,S,B,U,F,O,g-O,v),F=V=U=0,O=g;for(var X=0;X<286;++X)S[X]=0;for(X=0;X<30;++X)B[X]=0}var W=2,H=0,Z=w,Y=D-z&32767;if(G>2&&N==k(g-Y))for(var J=Math.min(_,G)-1,Q=Math.min(32767,g),K=Math.min(258,G);Y<=Q&&--Z&&D!=z;){if(r[g+W]==r[g+W-Y]){for(var rr=0;rr<K&&r[g+rr]==r[g+rr-Y];++rr);if(rr>W){if(W=rr,H=Y,rr>J)break;var tr=Math.min(Y,rr-2),nr=0;for(X=0;X<tr;++X){var er=g-Y+X+32768&32767,ar=er-x[er]+32768&32767;ar>nr&&(nr=ar,z=er)}}}Y+=(D=z)-(z=x[D])+32768&32767}if(H){I[F++]=268435456|p[W]<<18|y[H];var ir=31&p[W],or=31&y[H];U+=s[ir]+u[or],++S[257+ir],++B[or],M=g+W,++V}else I[F++]=r[g],++S[r[g]]}}v=C(r,d,f,I,S,B,U,F,O,g-O,v),!f&&7&v&&(v=P(d,v+1,$))}return L(h,0,e+R(v)+c)},X=function(){for(var r=new Int32Array(256),t=0;t<256;++t){for(var n=t,e=9;--e;)n=(1&n&&-306674912)^n>>>1;r[t]=n}return r}(),W=function(){var r=-1;return{p:function(t){for(var n=r,e=0;e<t.length;++e)n=X[255&n^t[e]]^n>>>8;r=n},d:function(){return~r}}},H=function(){var r=1,t=0;return{p:function(n){for(var e=r,a=t,i=0|n.length,o=0;o!=i;){for(var s=Math.min(o+2655,i);o<s;++o)a+=e+=n[o];e=(65535&e)+15*(e>>16),a=(65535&a)+15*(a>>16)}r=e,t=a},d:function(){return(255&(r%=65521))<<24|r>>>8<<16|(255&(t%=65521))<<8|t>>>8}}},Z=function(r,t,n,e,a){return G(r,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(r.length)))):12+t.mem,n,e,!a)},Y=function(r,t){var n={};for(var e in r)n[e]=r[e];for(var e in t)n[e]=t[e];return n},J=function(r,t,n){for(var e=r(),a=r.toString(),i=a.slice(a.indexOf("[")+1,a.lastIndexOf("]")).replace(/\s+/g,"").split(","),o=0;o<e.length;++o){var s=e[o],u=i[o];if("function"==typeof s){t+=";"+u+"=";var c=s.toString();if(s.prototype)if(-1!=c.indexOf("[native code]")){var f=c.indexOf(" ",8)+1;t+=c.slice(f,c.indexOf("(",f))}else for(var l in t+=c,s.prototype)t+=";"+u+".prototype."+l+"="+s.prototype[l].toString();else t+=c}else n[u]=s}return[t,n]},Q=[],K=function(r,t,n,a){var i;if(!Q[n]){for(var o="",s={},u=r.length-1,c=0;c<u;++c)o=(i=J(r[c],o,s))[0],s=i[1];Q[n]=J(r[u],o,s)}var f=Y({},Q[n][1]);return e.default(Q[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,f,function(r){var t=[];for(var n in r)r[n].buffer&&t.push((r[n]=new r[n].constructor(r[n])).buffer);return t}(f),a)},rr=function(){return[a,i,o,s,u,c,h,v,E,j,g,B,_,k,I,S,R,L,V,U,Sr,or,sr]},tr=function(){return[a,i,o,s,u,c,p,y,x,w,T,A,g,q,$,_,F,M,O,N,D,z,P,C,R,L,G,Z,Tr,or]},nr=function(){return[vr,mr,dr,W,X]},er=function(){return[yr,gr]},ar=function(){return[br,dr,H]},ir=function(){return[_r]},or=function(r){return postMessage(r,[r.buffer])},sr=function(r){return r&&r.size&&new a(r.size)},ur=function(r,t,n,e,a,i){var o=K(n,e,a,(function(r,t){o.terminate(),i(r,t)}));return o.postMessage([r,t],t.consume?[r.buffer]:[]),function(){o.terminate()}},cr=function(r){return r.ondata=function(r,t){return postMessage([r,t],[r.buffer])},function(t){return r.push(t.data[0],t.data[1])}},fr=function(r,t,n,e,a){var i,o=K(r,e,a,(function(r,n){r?(o.terminate(),t.ondata.call(t,r)):(n[1]&&o.terminate(),t.ondata.call(t,r,n[0],n[1]))}));o.postMessage(n),t.push=function(r,n){t.ondata||V(5),i&&t.ondata(V(4,0,1),null,!!n),o.postMessage([r,i=n],[r.buffer])},t.terminate=function(){o.terminate()}},lr=function(r,t){return r[t]|r[t+1]<<8},hr=function(r,t){return(r[t]|r[t+1]<<8|r[t+2]<<16|r[t+3]<<24)>>>0},pr=function(r,t){return hr(r,t)+4294967296*hr(r,t+4)},dr=function(r,t,n){for(;n;++t)r[t]=n,n>>>=8},vr=function(r,t){var n=t.filename;if(r[0]=31,r[1]=139,r[2]=8,r[8]=t.level<2?4:9==t.level?2:0,r[9]=3,0!=t.mtime&&dr(r,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){r[3]=8;for(var e=0;e<=n.length;++e)r[e+10]=n.charCodeAt(e)}},yr=function(r){31==r[0]&&139==r[1]&&8==r[2]||V(6,"invalid gzip data");var t=r[3],n=10;4&t&&(n+=r[10]|2+(r[11]<<8));for(var e=(t>>3&1)+(t>>4&1);e>0;e-=!r[n++]);return n+(2&t)},gr=function(r){var t=r.length;return(r[t-4]|r[t-3]<<8|r[t-2]<<16|r[t-1]<<24)>>>0},mr=function(r){return 10+(r.filename&&r.filename.length+1||0)},br=function(r,t){var n=t.level,e=0==n?0:n<6?1:9==n?3:2;r[0]=120,r[1]=e<<6|(e?32-2*e:1)},_r=function(r){(8!=(15&r[0])||r[0]>>>4>7||(r[0]<<8|r[1])%31)&&V(6,"invalid zlib data"),32&r[1]&&V(6,"invalid zlib data: preset dictionaries not supported")};function wr(r,t){return t||"function"!=typeof r||(t=r,r={}),this.ondata=t,r}var Ar=function(){function r(r,t){t||"function"!=typeof r||(t=r,r={}),this.ondata=t,this.o=r||{}}return r.prototype.p=function(r,t){this.ondata(Z(r,this.o,0,0,!t),t)},r.prototype.push=function(r,t){this.ondata||V(5),this.d&&V(4),this.d=t,this.p(r,t||!1)},r}();t.Deflate=Ar;var xr=function(){return function(r,t){fr([tr,function(){return[cr,Ar]}],this,wr.call(this,r,t),(function(r){var t=new Ar(r.data);onmessage=cr(t)}),6)}}();function Er(r,t,n){return n||(n=t,t={}),"function"!=typeof n&&V(7),ur(r,t,[tr],(function(r){return or(Tr(r.data[0],r.data[1]))}),0,n)}function Tr(r,t){return Z(r,t||{},0,0)}t.AsyncDeflate=xr,t.deflate=Er,t.deflateSync=Tr;var jr=function(){function r(r){this.s={},this.p=new a(0),this.ondata=r}return r.prototype.e=function(r){this.ondata||V(5),this.d&&V(4);var t=this.p.length,n=new a(t+r.length);n.set(this.p),n.set(r,t),this.p=n},r.prototype.c=function(r){this.d=this.s.i=r||!1;var t=this.s.b,n=U(this.p,this.o,this.s);this.ondata(L(n,t,this.s.b),this.d),this.o=L(n,this.s.b-32768),this.s.b=this.o.length,this.p=L(this.p,this.s.p/8|0),this.s.p&=7},r.prototype.push=function(r,t){this.e(r),this.c(t)},r}();t.Inflate=jr;var kr=function(){return function(r){this.ondata=r,fr([rr,function(){return[cr,jr]}],this,0,(function(){var r=new jr;onmessage=cr(r)}),7)}}();function Ir(r,t,n){return n||(n=t,t={}),"function"!=typeof n&&V(7),ur(r,t,[rr],(function(r){return or(Sr(r.data[0],sr(r.data[1])))}),1,n)}function Sr(r,t){return U(r,t)}t.AsyncInflate=kr,t.inflate=Ir,t.inflateSync=Sr;var Rr=function(){function r(r,t){this.c=W(),this.l=0,this.v=1,Ar.call(this,r,t)}return r.prototype.push=function(r,t){Ar.prototype.push.call(this,r,t)},r.prototype.p=function(r,t){this.c.p(r),this.l+=r.length;var n=Z(r,this.o,this.v&&mr(this.o),t&&8,!t);this.v&&(vr(n,this.o),this.v=0),t&&(dr(n,n.length-8,this.c.d()),dr(n,n.length-4,this.l)),this.ondata(n,t)},r}();t.Gzip=Rr,t.Compress=Rr;var Lr=function(){return function(r,t){fr([tr,nr,function(){return[cr,Ar,Rr]}],this,wr.call(this,r,t),(function(r){var t=new Rr(r.data);onmessage=cr(t)}),8)}}();function Br(r,t,n){return n||(n=t,t={}),"function"!=typeof n&&V(7),ur(r,t,[tr,nr,function(){return[Vr]}],(function(r){return or(Vr(r.data[0],r.data[1]))}),2,n)}function Vr(r,t){t||(t={});var n=W(),e=r.length;n.p(r);var a=Z(r,t,mr(t),8),i=a.length;return vr(a,t),dr(a,i-8,n.d()),dr(a,i-4,e),a}t.AsyncGzip=Lr,t.AsyncCompress=Lr,t.gzip=Br,t.compress=Br,t.gzipSync=Vr,t.compressSync=Vr;var Ur=function(){function r(r){this.v=1,jr.call(this,r)}return r.prototype.push=function(r,t){if(jr.prototype.e.call(this,r),this.v){var n=this.p.length>3?yr(this.p):4;if(n>=this.p.length&&!t)return;this.p=this.p.subarray(n),this.v=0}t&&(this.p.length<8&&V(6,"invalid gzip data"),this.p=this.p.subarray(0,-8)),jr.prototype.c.call(this,t)},r}();t.Gunzip=Ur;var Fr=function(){return function(r){this.ondata=r,fr([rr,er,function(){return[cr,jr,Ur]}],this,0,(function(){var r=new Ur;onmessage=cr(r)}),9)}}();function Mr(r,t,n){return n||(n=t,t={}),"function"!=typeof n&&V(7),ur(r,t,[rr,er,function(){return[Or]}],(function(r){return or(Or(r.data[0]))}),3,n)}function Or(r,t){return U(r.subarray(yr(r),-8),t||new a(gr(r)))}t.AsyncGunzip=Fr,t.gunzip=Mr,t.gunzipSync=Or;var Nr=function(){function r(r,t){this.c=H(),this.v=1,Ar.call(this,r,t)}return r.prototype.push=function(r,t){Ar.prototype.push.call(this,r,t)},r.prototype.p=function(r,t){this.c.p(r);var n=Z(r,this.o,this.v&&2,t&&4,!t);this.v&&(br(n,this.o),this.v=0),t&&dr(n,n.length-4,this.c.d()),this.ondata(n,t)},r}();t.Zlib=Nr;var Dr=function(){return function(r,t){fr([tr,ar,function(){return[cr,Ar,Nr]}],this,wr.call(this,r,t),(function(r){var t=new Nr(r.data);onmessage=cr(t)}),10)}}();function zr(r,t){t||(t={});var n=H();n.p(r);var e=Z(r,t,2,4);return br(e,t),dr(e,e.length-4,n.d()),e}t.AsyncZlib=Dr,t.zlib=function(r,t,n){return n||(n=t,t={}),"function"!=typeof n&&V(7),ur(r,t,[tr,ar,function(){return[zr]}],(function(r){return or(zr(r.data[0],r.data[1]))}),4,n)},t.zlibSync=zr;var Pr=function(){function r(r){this.v=1,jr.call(this,r)}return r.prototype.push=function(r,t){if(jr.prototype.e.call(this,r),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}t&&(this.p.length<4&&V(6,"invalid zlib data"),this.p=this.p.subarray(0,-4)),jr.prototype.c.call(this,t)},r}();t.Unzlib=Pr;var Cr=function(){return function(r){this.ondata=r,fr([rr,ir,function(){return[cr,jr,Pr]}],this,0,(function(){var r=new Pr;onmessage=cr(r)}),11)}}();function qr(r,t,n){return n||(n=t,t={}),"function"!=typeof n&&V(7),ur(r,t,[rr,ir,function(){return[$r]}],(function(r){return or($r(r.data[0],sr(r.data[1])))}),5,n)}function $r(r,t){return U((_r(r),r.subarray(2,-4)),t)}t.AsyncUnzlib=Cr,t.unzlib=qr,t.unzlibSync=$r;var Gr=function(){function r(r){this.G=Ur,this.I=jr,this.Z=Pr,this.ondata=r}return r.prototype.push=function(r,t){if(this.ondata||V(5),this.s)this.s.push(r,t);else{if(this.p&&this.p.length){var n=new a(this.p.length+r.length);n.set(this.p),n.set(r,this.p.length)}else this.p=r;if(this.p.length>2){var e=this,i=function(){e.ondata.apply(e,arguments)};this.s=31==this.p[0]&&139==this.p[1]&&8==this.p[2]?new this.G(i):8!=(15&this.p[0])||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(i):new this.Z(i),this.s.push(this.p,t),this.p=null}}},r}();t.Decompress=Gr;var Xr=function(){function r(r){this.G=Fr,this.I=kr,this.Z=Cr,this.ondata=r}return r.prototype.push=function(r,t){Gr.prototype.push.call(this,r,t)},r}();t.AsyncDecompress=Xr,t.decompress=function(r,t,n){return n||(n=t,t={}),"function"!=typeof n&&V(7),31==r[0]&&139==r[1]&&8==r[2]?Mr(r,t,n):8!=(15&r[0])||r[0]>>4>7||(r[0]<<8|r[1])%31?Ir(r,t,n):qr(r,t,n)},t.decompressSync=function(r,t){return 31==r[0]&&139==r[1]&&8==r[2]?Or(r,t):8!=(15&r[0])||r[0]>>4>7||(r[0]<<8|r[1])%31?Sr(r,t):$r(r,t)};var Wr=function(r,t,n,e){for(var i in r){var o=r[i],s=t+i,u=e;Array.isArray(o)&&(u=Y(e,o[1]),o=o[0]),o instanceof a?n[s]=[o,u]:(n[s+="/"]=[new a(0),u],Wr(o,s,n,e))}},Hr="undefined"!=typeof TextEncoder&&new TextEncoder,Zr="undefined"!=typeof TextDecoder&&new TextDecoder,Yr=0;try{Zr.decode($,{stream:!0}),Yr=1}catch(r){}var Jr=function(r){for(var t="",n=0;;){var e=r[n++],a=(e>127)+(e>223)+(e>239);if(n+a>r.length)return[t,L(r,n-1)];a?3==a?(e=((15&e)<<18|(63&r[n++])<<12|(63&r[n++])<<6|63&r[n++])-65536,t+=String.fromCharCode(55296|e>>10,56320|1023&e)):t+=1&a?String.fromCharCode((31&e)<<6|63&r[n++]):String.fromCharCode((15&e)<<12|(63&r[n++])<<6|63&r[n++]):t+=String.fromCharCode(e)}},Qr=function(){function r(r){this.ondata=r,Yr?this.t=new TextDecoder:this.p=$}return r.prototype.push=function(r,t){if(this.ondata||V(5),t=!!t,this.t)return this.ondata(this.t.decode(r,{stream:!0}),t),void(t&&(this.t.decode().length&&V(8),this.t=null));this.p||V(4);var n=new a(this.p.length+r.length);n.set(this.p),n.set(r,this.p.length);var e=Jr(n),i=e[0],o=e[1];t?(o.length&&V(8),this.p=null):this.p=o,this.ondata(i,t)},r}();t.DecodeUTF8=Qr;var Kr=function(){function r(r){this.ondata=r}return r.prototype.push=function(r,t){this.ondata||V(5),this.d&&V(4),this.ondata(rt(r),this.d=t||!1)},r}();function rt(r,t){if(t){for(var n=new a(r.length),e=0;e<r.length;++e)n[e]=r.charCodeAt(e);return n}if(Hr)return Hr.encode(r);var i=r.length,o=new a(r.length+(r.length>>1)),s=0,u=function(r){o[s++]=r};for(e=0;e<i;++e){if(s+5>o.length){var c=new a(s+8+(i-e<<1));c.set(o),o=c}var f=r.charCodeAt(e);f<128||t?u(f):f<2048?(u(192|f>>6),u(128|63&f)):f>55295&&f<57344?(u(240|(f=65536+(1047552&f)|1023&r.charCodeAt(++e))>>18),u(128|f>>12&63),u(128|f>>6&63),u(128|63&f)):(u(224|f>>12),u(128|f>>6&63),u(128|63&f))}return L(o,0,s)}function tt(r,t){if(t){for(var n="",e=0;e<r.length;e+=16384)n+=String.fromCharCode.apply(null,r.subarray(e,e+16384));return n}if(Zr)return Zr.decode(r);var a=Jr(r),i=a[0];return a[1].length&&V(8),i}t.EncodeUTF8=Kr,t.strToU8=rt,t.strFromU8=tt;var nt=function(r){return 1==r?3:r<6?2:9==r?1:0},et=function(r,t){return t+30+lr(r,t+26)+lr(r,t+28)},at=function(r,t,n){var e=lr(r,t+28),a=tt(r.subarray(t+46,t+46+e),!(2048&lr(r,t+8))),i=t+46+e,o=hr(r,t+20),s=n&&4294967295==o?it(r,i):[o,hr(r,t+24),hr(r,t+42)],u=s[0],c=s[1],f=s[2];return[lr(r,t+10),u,c,a,i+lr(r,t+30)+lr(r,t+32),f]},it=function(r,t){for(;1!=lr(r,t);t+=4+lr(r,t+2));return[pr(r,t+12),pr(r,t+4),pr(r,t+20)]},ot=function(r){var t=0;if(r)for(var n in r){var e=r[n].length;e>65535&&V(9),t+=e+4}return t},st=function(r,t,n,e,a,i,o,s){var u=e.length,c=n.extra,f=s&&s.length,l=ot(c);dr(r,t,null!=o?33639248:67324752),t+=4,null!=o&&(r[t++]=20,r[t++]=n.os),r[t]=20,t+=2,r[t++]=n.flag<<1|(i<0&&8),r[t++]=a&&8,r[t++]=255&n.compression,r[t++]=n.compression>>8;var h=new Date(null==n.mtime?Date.now():n.mtime),p=h.getFullYear()-1980;if((p<0||p>119)&&V(10),dr(r,t,p<<25|h.getMonth()+1<<21|h.getDate()<<16|h.getHours()<<11|h.getMinutes()<<5|h.getSeconds()>>>1),t+=4,-1!=i&&(dr(r,t,n.crc),dr(r,t+4,i<0?-i-2:i),dr(r,t+8,n.size)),dr(r,t+12,u),dr(r,t+14,l),t+=16,null!=o&&(dr(r,t,f),dr(r,t+6,n.attrs),dr(r,t+10,o),t+=14),r.set(e,t),t+=u,l)for(var d in c){var v=c[d],y=v.length;dr(r,t,+d),dr(r,t+2,y),r.set(v,t+4),t+=4+y}return f&&(r.set(s,t),t+=f),t},ut=function(r,t,n,e,a){dr(r,t,101010256),dr(r,t+8,n),dr(r,t+10,n),dr(r,t+12,e),dr(r,t+16,a)},ct=function(){function r(r){this.filename=r,this.c=W(),this.size=0,this.compression=0}return r.prototype.process=function(r,t){this.ondata(null,r,t)},r.prototype.push=function(r,t){this.ondata||V(5),this.c.p(r),this.size+=r.length,t&&(this.crc=this.c.d()),this.process(r,t||!1)},r}();t.ZipPassThrough=ct;var ft=function(){function r(r,t){var n=this;t||(t={}),ct.call(this,r),this.d=new Ar(t,(function(r,t){n.ondata(null,r,t)})),this.compression=8,this.flag=nt(t.level)}return r.prototype.process=function(r,t){try{this.d.push(r,t)}catch(r){this.ondata(r,null,t)}},r.prototype.push=function(r,t){ct.prototype.push.call(this,r,t)},r}();t.ZipDeflate=ft;var lt=function(){function r(r,t){var n=this;t||(t={}),ct.call(this,r),this.d=new xr(t,(function(r,t,e){n.ondata(r,t,e)})),this.compression=8,this.flag=nt(t.level),this.terminate=this.d.terminate}return r.prototype.process=function(r,t){this.d.push(r,t)},r.prototype.push=function(r,t){ct.prototype.push.call(this,r,t)},r}();t.AsyncZipDeflate=lt;var ht=function(){function r(r){this.ondata=r,this.u=[],this.d=1}return r.prototype.add=function(r){var t=this;if(this.ondata||V(5),2&this.d)this.ondata(V(4+8*(1&this.d),0,1),null,!1);else{var n=rt(r.filename),e=n.length,i=r.comment,o=i&&rt(i),s=e!=r.filename.length||o&&i.length!=o.length,u=e+ot(r.extra)+30;e>65535&&this.ondata(V(11,0,1),null,!1);var c=new a(u);st(c,0,r,n,s,-1);var f=[c],l=function(){for(var r=0,n=f;r<n.length;r++){var e=n[r];t.ondata(null,e,!1)}f=[]},h=this.d;this.d=0;var p=this.u.length,d=Y(r,{f:n,u:s,o,t:function(){r.terminate&&r.terminate()},r:function(){if(l(),h){var r=t.u[p+1];r?r.r():t.d=1}h=1}}),v=0;r.ondata=function(n,e,i){if(n)t.ondata(n,e,i),t.terminate();else if(v+=e.length,f.push(e),i){var o=new a(16);dr(o,0,134695760),dr(o,4,r.crc),dr(o,8,v),dr(o,12,r.size),f.push(o),d.c=v,d.b=u+v+16,d.crc=r.crc,d.size=r.size,h&&d.r(),h=1}else h&&l()},this.u.push(d)}},r.prototype.end=function(){var r=this;2&this.d?this.ondata(V(4+8*(1&this.d),0,1),null,!0):(this.d?this.e():this.u.push({r:function(){1&r.d&&(r.u.splice(-1,1),r.e())},t:function(){}}),this.d=3)},r.prototype.e=function(){for(var r=0,t=0,n=0,e=0,i=this.u;e<i.length;e++)n+=46+(c=i[e]).f.length+ot(c.extra)+(c.o?c.o.length:0);for(var o=new a(n+22),s=0,u=this.u;s<u.length;s++){var c=u[s];st(o,r,c,c.f,c.u,-c.c-2,t,c.o),r+=46+c.f.length+ot(c.extra)+(c.o?c.o.length:0),t+=c.b}ut(o,r,this.u.length,n,t),this.ondata(null,o,!0),this.d=2},r.prototype.terminate=function(){for(var r=0,t=this.u;r<t.length;r++)t[r].t();this.d=2},r}();t.Zip=ht,t.zip=function(r,t,n){n||(n=t,t={}),"function"!=typeof n&&V(7);var e={};Wr(r,"",e,t);var i=Object.keys(e),o=i.length,s=0,u=0,c=o,f=new Array(o),l=[],h=function(){for(var r=0;r<l.length;++r)l[r]()},p=function(r,t){gt((function(){n(r,t)}))};gt((function(){p=n}));var d=function(){var r=new a(u+22),t=s,n=u-s;u=0;for(var e=0;e<c;++e){var i=f[e];try{var o=i.c.length;st(r,u,i,i.f,i.u,o);var l=30+i.f.length+ot(i.extra),h=u+l;r.set(i.c,h),st(r,s,i,i.f,i.u,o,u,i.m),s+=16+l+(i.m?i.m.length:0),u=h+o}catch(r){return p(r,null)}}ut(r,s,f.length,n,t),p(null,r)};o||d();for(var v=function(r){var t=i[r],n=e[t],a=n[0],c=n[1],v=W(),y=a.length;v.p(a);var g=rt(t),m=g.length,b=c.comment,_=b&&rt(b),w=_&&_.length,A=ot(c.extra),x=0==c.level?0:8,E=function(n,e){if(n)h(),p(n,null);else{var a=e.length;f[r]=Y(c,{size:y,crc:v.d(),c:e,f:g,m:_,u:m!=t.length||_&&b.length!=w,compression:x}),s+=30+m+A+a,u+=76+2*(m+A)+(w||0)+a,--o||d()}};if(m>65535&&E(V(11,0,1),null),x)if(y<16e4)try{E(null,Tr(a,c))}catch(r){E(r,null)}else l.push(Er(a,c,E));else E(null,a)},y=0;y<c;++y)v(y);return h},t.zipSync=function(r,t){t||(t={});var n={},e=[];Wr(r,"",n,t);var i=0,o=0;for(var s in n){var u=n[s],c=u[0],f=u[1],l=0==f.level?0:8,h=(E=rt(s)).length,p=f.comment,d=p&&rt(p),v=d&&d.length,y=ot(f.extra);h>65535&&V(11);var g=l?Tr(c,f):c,m=g.length,b=W();b.p(c),e.push(Y(f,{size:c.length,crc:b.d(),c:g,f:E,m:d,u:h!=s.length||d&&p.length!=v,o:i,compression:l})),i+=30+h+y+m,o+=76+2*(h+y)+(v||0)+m}for(var _=new a(o+22),w=i,A=o-i,x=0;x<e.length;++x){var E=e[x];st(_,E.o,E,E.f,E.u,E.c.length);var T=30+E.f.length+ot(E.extra);_.set(E.c,E.o+T),st(_,i,E,E.f,E.u,E.c.length,E.o,E.m),i+=16+T+(E.m?E.m.length:0)}return ut(_,i,e.length,A,w),_};var pt=function(){function r(){}return r.prototype.push=function(r,t){this.ondata(null,r,t)},r.compression=0,r}();t.UnzipPassThrough=pt;var dt=function(){function r(){var r=this;this.i=new jr((function(t,n){r.ondata(null,t,n)}))}return r.prototype.push=function(r,t){try{this.i.push(r,t)}catch(r){this.ondata(r,null,t)}},r.compression=8,r}();t.UnzipInflate=dt;var vt=function(){function r(r,t){var n=this;t<32e4?this.i=new jr((function(r,t){n.ondata(null,r,t)})):(this.i=new kr((function(r,t,e){n.ondata(r,t,e)})),this.terminate=this.i.terminate)}return r.prototype.push=function(r,t){this.i.terminate&&(r=L(r,0)),this.i.push(r,t)},r.compression=8,r}();t.AsyncUnzipInflate=vt;var yt=function(){function r(r){this.onfile=r,this.k=[],this.o={0:pt},this.p=$}return r.prototype.push=function(r,t){var n=this;if(this.onfile||V(5),this.p||V(4),this.c>0){var e=Math.min(this.c,r.length),i=r.subarray(0,e);if(this.c-=e,this.d?this.d.push(i,!this.c):this.k[0].push(i),(r=r.subarray(e)).length)return this.push(r,t)}else{var o=0,s=0,u=void 0,c=void 0;this.p.length?r.length?((c=new a(this.p.length+r.length)).set(this.p),c.set(r,this.p.length)):c=this.p:c=r;for(var f=c.length,l=this.c,h=l&&this.d,p=function(){var r,t=hr(c,s);if(67324752==t){o=1,u=s,d.d=null,d.c=0;var e=lr(c,s+6),a=lr(c,s+8),i=2048&e,h=8&e,p=lr(c,s+26),v=lr(c,s+28);if(f>s+30+p+v){var y=[];d.k.unshift(y),o=2;var g,m=hr(c,s+18),b=hr(c,s+22),_=tt(c.subarray(s+30,s+=30+p),!i);4294967295==m?(r=h?[-2]:it(c,s),m=r[0],b=r[1]):h&&(m=-1),s+=v,d.c=m;var w={name:_,compression:a,start:function(){if(w.ondata||V(5),m){var r=n.o[a];r||w.ondata(V(14,"unknown compression type "+a,1),null,!1),(g=m<0?new r(_):new r(_,m,b)).ondata=function(r,t,n){w.ondata(r,t,n)};for(var t=0,e=y;t<e.length;t++){var i=e[t];g.push(i,!1)}n.k[0]==y&&n.c?n.d=g:g.push($,!0)}else w.ondata(null,$,!0)},terminate:function(){g&&g.terminate&&g.terminate()}};m>=0&&(w.size=m,w.originalSize=b),d.onfile(w)}return"break"}if(l){if(134695760==t)return u=s+=12+(-2==l&&8),o=3,d.c=0,"break";if(33639248==t)return u=s-=4,o=3,d.c=0,"break"}},d=this;s<f-4&&"break"!==p();++s);if(this.p=$,l<0){var v=o?c.subarray(0,u-12-(-2==l&&8)-(134695760==hr(c,u-16)&&4)):c.subarray(0,s);h?h.push(v,!!o):this.k[+(2==o)].push(v)}if(2&o)return this.push(c.subarray(s),t);this.p=c.subarray(s)}t&&(this.c&&V(13),this.p=null)},r.prototype.register=function(r){this.o[r.compression]=r},r}();t.Unzip=yt;var gt="function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout?setTimeout:function(r){r()};t.unzip=function(r,t,n){n||(n=t,t={}),"function"!=typeof n&&V(7);var e=[],i=function(){for(var r=0;r<e.length;++r)e[r]()},o={},s=function(r,t){gt((function(){n(r,t)}))};gt((function(){s=n}));for(var u=r.length-22;101010256!=hr(r,u);--u)if(!u||r.length-u>65558)return s(V(13,0,1),null),i;var c=lr(r,u+8);if(c){var f=c,l=hr(r,u+16),h=4294967295==l||65535==f;if(h){var p=hr(r,u-12);(h=101075792==hr(r,p))&&(f=c=hr(r,p+32),l=hr(r,p+48))}for(var d=t&&t.filter,v=function(t){var n=at(r,l,h),u=n[0],f=n[1],p=n[2],v=n[3],y=n[4],g=n[5],m=et(r,g);l=y;var b=function(r,t){r?(i(),s(r,null)):(t&&(o[v]=t),--c||s(null,o))};if(!d||d({name:v,size:f,originalSize:p,compression:u}))if(u)if(8==u){var _=r.subarray(m,m+f);if(f<32e4)try{b(null,Sr(_,new a(p)))}catch(r){b(r,null)}else e.push(Ir(_,{size:p},b))}else b(V(14,"unknown compression type "+u,1),null);else b(null,L(r,m,m+f));else b(null,null)},y=0;y<f;++y)v()}else s(null,{});return i},t.unzipSync=function(r,t){for(var n={},e=r.length-22;101010256!=hr(r,e);--e)(!e||r.length-e>65558)&&V(13);var i=lr(r,e+8);if(!i)return{};var o=hr(r,e+16),s=4294967295==o||65535==i;if(s){var u=hr(r,e-12);(s=101075792==hr(r,u))&&(i=hr(r,u+32),o=hr(r,u+48))}for(var c=t&&t.filter,f=0;f<i;++f){var l=at(r,o,s),h=l[0],p=l[1],d=l[2],v=l[3],y=l[4],g=l[5],m=et(r,g);o=y,c&&!c({name:v,size:p,originalSize:d,compression:h})||(h?8==h?n[v]=Sr(r.subarray(m,m+p),new a(d)):V(14,"unknown compression type "+h):n[v]=L(r,m,m+p))}return n}},891:(r,t)=>{var n={};t.default=function(r,t,e,a,i){var o=new Worker(n[t]||(n[t]=URL.createObjectURL(new Blob([r+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return o.onmessage=function(r){var t=r.data,n=t.$e$;if(n){var e=new Error(n[0]);e.code=n[1],e.stack=n[2],i(e,null)}else i(null,t)},o.postMessage(e,a),o}}},t={};function n(e){var a=t[e];if(void 0!==a)return a.exports;var i=t[e]={id:e,loaded:!1,exports:{}};return r[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.n=r=>{var t=r&&r.__esModule?()=>r.default:()=>r;return n.d(t,{a:t}),t},n.d=(r,t)=>{for(var e in t)n.o(t,e)&&!n.o(r,e)&&Object.defineProperty(r,e,{enumerable:!0,get:t[e]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(r){if("object"==typeof window)return window}}(),n.o=(r,t)=>Object.prototype.hasOwnProperty.call(r,t),n.nmd=r=>(r.paths=[],r.children||(r.children=[]),r);var e={};function a(r,t){return Math.floor((r+180)/360*Math.pow(2,t))}function i(r,t){return Math.floor((1-Math.log(Math.tan(r*Math.PI/180)+1/Math.cos(r*Math.PI/180))/Math.PI)/2*Math.pow(2,t))}n.d(e,{l:()=>b});const o=r=>r.join(","),s=r=>{const[t,n,e]=r,a=1/2**t;return[a,n*a,e*a]},u=(r,t,n)=>{const e=r.createShader(t);if(!e)throw new Error(`createShader failed ${t}`);if(r.shaderSource(e,n),r.compileShader(e),!r.getShaderParameter(e,r.COMPILE_STATUS)){const n=r.getShaderInfoLog(e);throw r.deleteShader(e),new Error(`Failed to create shader ${t}: ${n}`)}return e},c=(r,t,n)=>{const e=r.createProgram();if(!e)throw new Error("createProgram failed");if(r.attachShader(e,t),r.attachShader(e,n),r.linkProgram(e),!r.getProgramParameter(e,r.LINK_STATUS)){const t=r.getProgramInfoLog(e);throw r.deleteProgram(e),new Error(`Failed to create program: ${t}`)}return e},f=(r,t,n)=>{const e=r.getUniformLocation(t,n);if(!e)throw new Error(`Failed to get Uniform Location for ${n}`);return e},l=r=>{const t=r.createTexture();if(!t)throw new Error("Failed to create texture");return t},h=r=>{const t=r.createBuffer();if(!t)throw new Error("Failed to create buffer");return t},p=(r,t,n)=>{const e=r.createFramebuffer();if(!e)throw new Error("Failed to create framebuffer");const a=r.createTexture();if(!a)throw new Error("Failed to create texture for framebuffer");return r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t,n,0,r.RGBA,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.bindFramebuffer(r.FRAMEBUFFER,e),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0),{framebuffer:e,texture:a}},d=class{chunk;chunks;loader;dimensions;shape;dimArrs;data=null;dataCache;z;x;y;loading=!1;loadingPromise=null;tileTexture;vertexBuffer;pixCoordBuffer;constructor({chunk:r,chunks:t,loader:n,dimensions:e,shape:a,dimArrs:i,z:o,x:s,y:u,gl:c}){this.chunk=r,this.chunks=t,this.loader=n,this.dimensions=e,this.shape=a,this.dimArrs=i,this.dataCache={},this.z=o,this.x=s,this.y=u,this.tileTexture=l(c),this.vertexBuffer=h(c),this.pixCoordBuffer=h(c)}async fetchData(r){const t=(({selector:r,dimensions:t,dimArrs:n,shape:e,chunks:a,x:i,y:o})=>t.reduce(((t,s,u)=>{if(["x","lon"].includes(s))return t.flatMap((r=>[[...r,i]]));if(["y","lat"].includes(s))return t.flatMap((r=>[[...r,o]]));const c=a[u],f=n[s];if(void 0===c||void 0===f)throw new Error("Need at least 1D array");const l=r[s],h=Array.isArray(l)?l.map((r=>f.indexOf(r))):void 0!==l?[f.indexOf(l)]:Array.from({length:e[u]},((r,t)=>t)),p=[...new Set(h.map((r=>Math.floor(r/c))))];return t.flatMap((r=>p.map((t=>[...r,t]))))}),[[]]))({selector:r,dimensions:this.dimensions,dimArrs:this.dimArrs,shape:this.shape,chunks:this.chunks,x:this.x,y:this.y}),n=t[0];if(1!==t.length||!n)throw new Error("Need exactly one chunk per tile");const e=n.join(",");return this.dataCache[e]?(this.data=this.dataCache[e],this.data):(this.loadingPromise||(this.loadingPromise=new Promise((t=>{this.loading=!0;const a=this.dimensions.map((t=>{if(["x","y"].includes(t))return null;if(void 0===r[t])return null;{const n=this.dimArrs[t]?.findIndex((n=>n===r[t]));if(void 0===n)throw new Error("Couldnt extract indices from dimArrs");return n}}));this.loader(n,((r,n)=>{this.loading=!1,this.loadingPromise=null;const i=n.pick(...a);this.data=i.data,this.dataCache[e]=this.data,t(this.data)}))}))),this.loadingPromise)}getDimension(r){const t=this.dimensions.indexOf(r);if(-1!==t)return this.chunks[t]}};var v=n(300),y=n.n(v);const g=r=>r?async(t,n)=>{const e="string"==typeof t?t:t instanceof Request?t.url:t.toString(),a=await r(e);return window.fetch(a.url,{...n,headers:a.headers,credentials:a.credentials})}:window.fetch,m=r=>{const t=r[0]?.datasets;if(!t)throw new Error("No `multiscales` or `datasets` in zarr metadata");const n=t.map((r=>Number(r.path))),e=Math.max(...n),a=t[0]?.pixels_per_tile,i=t[0]?.crs??"EPSG:3857";if(!a)throw new Error("No `pixels_per_tile` value in `multiscales` metadata.");return{levels:n,maxZoom:e,tileSize:a,crs:i}};class b{type;renderingMode;map;id;zarrSource;zarrVersion;variable;selector;invalidate;transformRequest;cmapLength;cmap;vmin;vmax;opacity;minRenderZoom;loaders;tiles;maxZoom;fillValue;gl;program;scaleLoc;shiftXLoc;shiftYLoc;matrixLoc;vminLoc;vmaxLoc;opacityLoc;noDataLoc;vertexLoc;cmapTex;cmapLoc;vertexArr;pixCoordArr;texLoc;pixCoordLoc;frameBuffers;isUpdating;canvasWidth;canvasHeight;renderProgram;renderVertexLoc;renderTexLoc;vertexBuffer;constructor({id:r,source:t,version:n,variable:e,selector:a,map:i,colormap:o,vmin:s,vmax:u,opacity:c=1,minRenderZoom:f=3,invalidate:l=()=>{},transformRequest:h}){this.type="custom",this.renderingMode="2d",this.id=r,this.zarrSource=t,this.zarrVersion=n,this.variable=e,this.selector=a??{},this.invalidate=l,this.transformRequest=h,this.cmap=new Float32Array(o.flat().map((r=>r/255))),this.cmapLength=o.length,this.vmin=s,this.vmax=u,this.opacity=c,this.minRenderZoom=f,this.map=i,this.loaders={},this.tiles={},this.maxZoom=4,this.fillValue=0,this.frameBuffers={current:null,next:null},this.isUpdating=!1,this.canvasWidth=512,this.canvasHeight=512}setOpacity(r){this.opacity=r,this.invalidate()}setVminVmax(r,t){this.vmin=r,this.vmax=t,this.invalidate()}async setVariable(r){this.variable=r,this.tiles={},await this.prepareTiles(),this.getVisibleTiles(),await this.prefetchTileData(),this.invalidate()}async setSelector(r){this.selector=r,await this.prefetchTileData(),this.invalidate()}async prefetchTileData(){const r=this.getVisibleTiles().map((r=>{const t=o(r),n=this.tiles[t];return n&&!n.data?n.fetchData(this.selector):null})).filter((r=>null!==r));r.length>0&&(await Promise.all(r),this.invalidate())}getVisibleTiles(){const r=((r,t)=>t?Math.min(Math.max(3,Math.floor(r)),t):Math.max(0,Math.floor(r)))(this.map.getZoom(),this.maxZoom);if(!this.loaders[r])return[];const t=this.map.getBounds()?.toArray();if(!t)throw new Error("Couldn't get map bounds");const n=((r,t)=>{const[[n,e],[o,s]]=t,u=a(n,r),c=a(o,r),f=i(s,r),l=i(e,r),h=[];for(let t=u;t<=c;t++)for(let n=f;n<=l;n++)h.push([r,t,n]);return h})(r,t);return n}async prepareTiles(){if(void 0===this.gl)throw new Error("Cant prepareTiles with no GL context set");const r=this.gl,{loaders:t,dimensions:n,dimArrs:e,levels:a,maxZoom:i,shape:o,chunks:s,fillValue:u}=await(async(r,t,n,e)=>{const a="v2"===n?(async(r,t,n)=>{const e=g(n),[a,i]=await new Promise(((t,n)=>{y()(e,"v2").openGroup(r,((r,e,a)=>{r&&n(r),t([e,a])}))})),o=i.metadata[".zattrs"];if(!o)throw new Error(`Failed to load .zattrs for ${r}`);const s=o.multiscales,u=s[0]?.datasets;if(!u)throw new Error(`Failed to load .zattrs for ${r}`);const{levels:c,maxZoom:f,tileSize:l,crs:h}=m(s),p=`${c[0]}/${t}/.zarray`,d=i.metadata[p];if(!d)throw new Error(`Failed to load .zarray for ${r} and ${p}`);const v=d.shape,b=d.chunks,_=d.fill_value,w=`${c[0]}/${t}/.zattrs`,A=i.metadata[w];if(!A)throw new Error(`Failed to load .zattrs for ${r} and ${p}`);const x=A._ARRAY_DIMENSIONS,E=Object.fromEntries(await Promise.all(x.map((r=>new Promise(((t,n)=>{const e=a[`${c[0]}/${r}`];e&&void 0!==e?e([0],((e,a)=>{e?n(e):t([r,Array.from(a.data)])})):n(`No loader for dimension ${r}`)}))))));return{loaders:a,dimensions:x,dimArrs:E,levels:c,maxZoom:f,tileSize:l,crs:h,shape:v,chunks:b,fillValue:_}})(r,t,e):(async(r,t,n)=>{const e=g(n),a=await e(`${r}/zarr.json`).then((r=>r.json())),{levels:i,maxZoom:o,tileSize:s,crs:u}=m(a.attributes.multiscales),c=await e(`${r}/${i[0]}/${t}/zarr.json`).then((r=>r.json())),f=c.attributes._ARRAY_DIMENSIONS,l=c.shape,h="sharding_indexed"==c.codecs[0].name?c.codecs[0].configuration.chunk_shape:c.chunk_grid.configuration.chunk_shape,p=c.fill_value,d=Object.fromEntries(await Promise.all(i.map((n=>new Promise(((a,i)=>{y()(e,"v3").open(`${r}/${n}/${t}`,((r,e)=>{r?i(r):a([`${n}/${t}`,e])}))})))))),v=Object.fromEntries(await Promise.all(f.map((t=>new Promise(((n,a)=>{y()(e,"v3").open(`${r}/${i[0]}/${t}`,((r,e)=>{r?a(r):e([0],((r,e)=>{r?a(r):n([t,Array.from(e.data)])}))}))}))))));return{loaders:d,dimensions:f,dimArrs:v,levels:i,maxZoom:o,tileSize:s,crs:u,shape:l,chunks:h,fillValue:p}})(r,t,e);return a})(this.zarrSource,this.variable,this.zarrVersion,this.transformRequest);this.maxZoom=i,this.fillValue=u,a.forEach((a=>{const i=a+"/"+this.variable,u=t[i];if(!u)throw new Error(`Failed to get loader for ${i}`);this.loaders[a]=u,Array.from({length:Math.pow(2,a)},((t,i)=>{Array.from({length:Math.pow(2,a)},((t,c)=>{const f=[a,i,c].join(","),l=[c,i];this.tiles[f]=new d({chunk:l,chunks:s,loader:u,gl:r,dimensions:n,dimArrs:e,shape:o,z:a,x:i,y:c})}))}))}))}async getTileValue(r,t,n,e){const u=this.maxZoom,c=[u,a(r,u),i(t,u)],f=o(c),l=this.tiles[f];if(l){const[r,t,a]=s(c),[i,o]=[n-t,e-a],f=await l.fetchData(this.selector),h=l.getDimension("x"),p=l.getDimension("y"),[d,v]=[Math.round(i*h*2**u),Math.round(o*p*2**u)],y=f[v*h+d];if(y)return y}return-1}async onAdd(r,t){this.gl=t;const n=u(t,t.VERTEX_SHADER,"#version 300 es\nuniform float scale;\nuniform float shift_x;\nuniform float shift_y;\nuniform mat4 matrix;\n\nin vec2 pix_coord_in;\nin vec2 vertex;\n\nout vec2 pix_coord;\n\nvoid main() {\n  vec2 a = vec2(vertex.x * scale + shift_x, vertex.y * scale + shift_y);\n  gl_Position = matrix * vec4(a, 0.0, 1.0);\n  pix_coord = pix_coord_in;\n}\n"),e=u(t,t.FRAGMENT_SHADER,"#version 300 es\nprecision highp float;\n\nuniform float vmin;\nuniform float vmax;\nuniform float opacity;\nuniform float nodata;\n\nuniform sampler2D tex;\nuniform sampler2D cmap;\n\nin vec2 pix_coord;\nout vec4 color;\n\nvoid main() {\n  float value = texture(tex, pix_coord).r;\n  if (value == nodata) {\n    discard;\n  }\n  float norm = (value - vmin)/(vmax - vmin);\n  float cla = clamp(norm, 0.0, 1.0);\n  vec4 c = texture(cmap, vec2(cla, 0.5));\n  color = vec4(c.r, c.g, c.b, opacity);\n}\n");this.program=c(t,n,e),this.scaleLoc=f(t,this.program,"scale"),this.shiftXLoc=f(t,this.program,"shift_x"),this.shiftYLoc=f(t,this.program,"shift_y"),this.matrixLoc=f(t,this.program,"matrix"),this.vminLoc=f(t,this.program,"vmin"),this.vmaxLoc=f(t,this.program,"vmax"),this.opacityLoc=f(t,this.program,"opacity"),this.noDataLoc=f(t,this.program,"nodata"),this.cmapTex=l(t),this.cmapLoc=f(t,this.program,"cmap"),this.texLoc=f(t,this.program,"tex"),this.vertexLoc=t.getAttribLocation(this.program,"vertex"),this.vertexArr=new Float32Array([-1,1,-1,-1,1,1,1,-1]),this.pixCoordLoc=t.getAttribLocation(this.program,"pix_coord_in"),this.pixCoordArr=new Float32Array([0,0,0,1,1,0,1,1]),this.canvasWidth=t.canvas.width,this.canvasHeight=t.canvas.height,this.frameBuffers.current=p(t,this.canvasWidth,this.canvasHeight),this.frameBuffers.next=p(t,this.canvasWidth,this.canvasHeight),await this.prepareTiles(),this.vertexBuffer=h(t);const a=u(t,t.VERTEX_SHADER,"#version 300 es\nin vec2 vertex;\nout vec2 texCoord;\nvoid main() {\n  gl_Position = vec4(vertex, 0.0, 1.0);\n  texCoord = vertex * 0.5 + 0.5;  // Convert from [-1,1] to [0,1]\n}\n"),i=u(t,t.FRAGMENT_SHADER,"#version 300 es\nprecision highp float;\nuniform sampler2D tex;\nin vec2 texCoord;\nout vec4 fragColor;\nvoid main() {\n  fragColor = texture(tex, texCoord);\n}\n");this.renderProgram=c(t,a,i),this.renderVertexLoc=t.getAttribLocation(this.renderProgram,"vertex"),this.renderTexLoc=f(t,this.renderProgram,"tex"),t.deleteShader(a),t.deleteShader(i),await this.prefetchTileData()}prerender(r,t){if(this.isUpdating)return;r.useProgram(this.program),r.canvas.width===this.canvasWidth&&r.canvas.height===this.canvasHeight||(this.canvasWidth=r.canvas.width,this.canvasHeight=r.canvas.height,this.frameBuffers.current=p(r,this.canvasWidth,this.canvasHeight),this.frameBuffers.next=p(r,this.canvasWidth,this.canvasHeight)),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,this.frameBuffers.next.framebuffer),r.bindFramebuffer(r.READ_FRAMEBUFFER,this.frameBuffers.current.framebuffer),r.blitFramebuffer(0,0,this.canvasWidth,this.canvasHeight,0,0,this.canvasWidth,this.canvasHeight,r.COLOR_BUFFER_BIT,r.NEAREST),r.bindFramebuffer(r.FRAMEBUFFER,this.frameBuffers.next.framebuffer),r.viewport(0,0,this.canvasWidth,this.canvasHeight),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,this.cmapTex),r.uniform1i(this.cmapLoc,1),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texImage2D(r.TEXTURE_2D,0,r.RGB16F,this.cmapLength,1,0,r.RGB,r.FLOAT,this.cmap),r.uniform1f(this.vminLoc,this.vmin),r.uniform1f(this.vmaxLoc,this.vmax),r.uniform1f(this.opacityLoc,this.opacity),r.uniform1f(this.noDataLoc,this.fillValue),r.uniformMatrix4fv(this.matrixLoc,!1,t);const n=this.getVisibleTiles();this.prefetchTileData();for(const t of n){const n=o(t),e=this.tiles[n];if(!e)continue;if(!e.data)continue;const[a,i,u]=s(t);r.uniform1f(this.scaleLoc,a),r.uniform1f(this.shiftXLoc,i),r.uniform1f(this.shiftYLoc,u),r.bindBuffer(r.ARRAY_BUFFER,e.vertexBuffer),r.bufferData(r.ARRAY_BUFFER,this.vertexArr,r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,e.pixCoordBuffer),r.bufferData(r.ARRAY_BUFFER,this.pixCoordArr,r.STATIC_DRAW),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,e.tileTexture),r.uniform1i(this.texLoc,0),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE);const c=e.getDimension("x"),f=e.getDimension("y");r.texImage2D(r.TEXTURE_2D,0,r.R16F,c,f,0,r.RED,r.FLOAT,e.data),r.enableVertexAttribArray(this.vertexLoc),r.vertexAttribPointer(this.vertexLoc,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(this.pixCoordLoc),r.vertexAttribPointer(this.pixCoordLoc,2,r.FLOAT,!1,0,0),r.drawArrays(r.TRIANGLE_STRIP,0,4)}const e=this.frameBuffers.current;this.frameBuffers.current=this.frameBuffers.next,this.frameBuffers.next=e,this.isUpdating=!1}render(r,t){this.frameBuffers.current&&(r.bindFramebuffer(r.FRAMEBUFFER,null),r.viewport(0,0,this.canvasWidth,this.canvasHeight),r.useProgram(this.renderProgram),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.frameBuffers.current.texture),r.uniform1i(this.renderTexLoc,0),r.bindBuffer(r.ARRAY_BUFFER,this.vertexBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,1,1]),r.STATIC_DRAW),r.enableVertexAttribArray(this.renderVertexLoc),r.vertexAttribPointer(this.renderVertexLoc,2,r.FLOAT,!1,0,0),r.drawArrays(r.TRIANGLE_STRIP,0,4))}}var _=e.l;export{_ as ZarrLayer};
//# sourceMappingURL=zarr-gl.js.map